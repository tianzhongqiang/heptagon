<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>静水流深</title>
  <subtitle>Just For Fun</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.thinkyixia.com/"/>
  <updated>2018-11-19T16:00:00.000Z</updated>
  <id>http://www.thinkyixia.com/</id>
  
  <author>
    <name>那个谁</name>
    <email>fiftyfirst@163.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>今日头条视频爬虫</title>
    <link href="http://www.thinkyixia.com/2018/11/20/jiritoutiao-1/"/>
    <id>http://www.thinkyixia.com/2018/11/20/jiritoutiao-1/</id>
    <published>2018-11-19T16:00:00.000Z</published>
    <updated>2018-11-19T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="今日头条视频页"><a href="#今日头条视频页" class="headerlink" title="今日头条视频页"></a>今日头条视频页</h1><p><a href="https://www.365yg.com/" target="_blank" rel="noopener">https://www.365yg.com/</a></p>
<h2 id="1、首先打开今日头条视频列表页"><a href="#1、首先打开今日头条视频列表页" class="headerlink" title="1、首先打开今日头条视频列表页"></a>1、首先打开今日头条视频列表页</h2><p>往下刷新的时候获取观察请求链接情况获取到视频列表的请求链接</p>
<h3 id="链接如下"><a href="#链接如下" class="headerlink" title="链接如下"></a>链接如下</h3><p><a href="https://www.365yg.com/api/pc/feed/?max_behot_time=1542351388&amp;category=video_new&amp;utm_source=toutiao&amp;widen=1&amp;tadrequire=true&amp;as=A1D57BBEAE87838&amp;cp=5BEE7798D358EE1&amp;_signature=RU1MfhAUHqXfJZp0ysi3V0VNTG" target="_blank" rel="noopener">https://www.365yg.com/api/pc/feed/?max_behot_time=1542351388&amp;category=video_new&amp;utm_source=toutiao&amp;widen=1&amp;tadrequire=true&amp;as=A1D57BBEAE87838&amp;cp=5BEE7798D358EE1&amp;_signature=RU1MfhAUHqXfJZp0ysi3V0VNTG</a></p>
<p>获取视频列表如下<br><img src="/images/toutiao_1.png" alt=""></p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>max_behot_time</td>
<td>1542351388</td>
<td>变</td>
</tr>
<tr>
<td>category</td>
<td>video_new</td>
<td>变</td>
</tr>
<tr>
<td>utm_source</td>
<td>toutiao</td>
<td>不变</td>
</tr>
<tr>
<td>widen</td>
<td>1</td>
<td>不变</td>
</tr>
<tr>
<td>tadrequire</td>
<td>true</td>
<td>不变</td>
</tr>
<tr>
<td>as</td>
<td>A1D57BBEAE87838</td>
<td>变</td>
</tr>
<tr>
<td>cp</td>
<td>5BEE7798D358EE1</td>
<td>变</td>
</tr>
<tr>
<td>_signature</td>
<td>RU1MfhAUHqXfJZp0ysi3V0VNTG</td>
<td>变</td>
</tr>
</tbody>
</table>
<p>一个一个的看</p>
<h3 id="1、max-behot-time"><a href="#1、max-behot-time" class="headerlink" title="1、max_behot_time"></a>1、max_behot_time</h3><p>从参数的数看应该是一个时间戳，暂时可以不用管</p>
<h3 id="2、category"><a href="#2、category" class="headerlink" title="2、category"></a>2、category</h3><p>从字段的意思看是视频的频道（分类），video_new 应该是推荐页面，但是从页面上看不到任何分类信息，所以第一个需要找的参数就是视频的频道列表。</p>
<p><img src="/images/toutiao_2.png" alt=""></p>
<p>这个参数比较简单，可以直接拿video_new 参数值去视频js文件中搜索一下</p>
<p><img src="/images/toutiao_3.png" alt=""></p>
<p>整理如下：</p>
<table>
<thead>
<tr>
<th>频道id</th>
<th>频道名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>video_new</td>
<td>推荐</td>
</tr>
<tr>
<td>subv_voice</td>
<td>音乐</td>
</tr>
<tr>
<td>subv_funny</td>
<td>搞笑</td>
</tr>
<tr>
<td>subv_society</td>
<td>社会</td>
</tr>
<tr>
<td>subv_comedy</td>
<td>小品</td>
</tr>
<tr>
<td>subv_life</td>
<td>生活</td>
</tr>
<tr>
<td>subv_movie</td>
<td>影视</td>
</tr>
<tr>
<td>subv_entertainment</td>
<td>娱乐</td>
</tr>
<tr>
<td>subv_cute</td>
<td>呆萌</td>
</tr>
<tr>
<td>subv_game</td>
<td>游戏</td>
</tr>
<tr>
<td>subv_boutique</td>
<td>原创</td>
</tr>
<tr>
<td>subv_broaden_view</td>
<td>开眼</td>
</tr>
</tbody>
</table>
<h4 id="3、as、cp"><a href="#3、as、cp" class="headerlink" title="3、as、cp"></a>3、as、cp</h4><p>按照上面的方法还是去js文件中搜索，不过由于该参数每次变化，所以只能搜索参数名。<br>搜索cp，发现cp和as都找到了，一下逮住俩</p>
<p><img src="/images/toutiao_4.png" alt=""></p>
<p>执行的时候，发现找不到<code>s</code>，断点走一遍发现<code>(0, s.default)(t)</code>就是把<code>t</code>做了一遍<code>md5</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">i</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> t = <span class="built_in">Math</span>.floor((<span class="keyword">new</span> <span class="built_in">Date</span>).getTime() / <span class="number">1e3</span>),</span><br><span class="line">            e = t.toString(<span class="number">16</span>).toUpperCase(),</span><br><span class="line">            n = (<span class="number">0</span>, s.default)(t).toString().toUpperCase(); <span class="comment">// 直接换成自己对t做md5操作就可以了</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="number">8</span> != e.length)</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="keyword">as</span>: <span class="string">"479BB4B7254C150"</span>,</span><br><span class="line">                cp: <span class="string">"7E0AC8874BB0985"</span></span><br><span class="line">            &#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> r = n.slice(<span class="number">0</span>, <span class="number">5</span>), i = n.slice(<span class="number">-5</span>), o = <span class="string">""</span>, a = <span class="number">0</span>; a &lt; <span class="number">5</span>; a++)</span><br><span class="line">            o += r[a] + e[a];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> u = <span class="string">""</span>, l = <span class="number">0</span>; l &lt; <span class="number">5</span>; l++)</span><br><span class="line">            u += e[l + <span class="number">3</span>] + i[l];</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="keyword">as</span>: <span class="string">"A1"</span> + o + e.slice(<span class="number">-3</span>),</span><br><span class="line">            cp: e.slice(<span class="number">0</span>, <span class="number">3</span>) + u + <span class="string">"E1"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h4 id="4、signature"><a href="#4、signature" class="headerlink" title="4、signature"></a>4、signature</h4><p>继续搜索</p>
<p><img src="/images/toutiao_5.png" alt=""></p>
<p>看一看到<code>_signature</code>这个参数就是<code>r</code>，而<code>var r = (0, m.sign)(n + &quot;&quot;);</code>然后打断点继续找<code>m</code>，<br>一步一步往上找，最后在下图位置找到</p>
<p><img src="/images/toutiao_6.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>(<span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'e(e,a,r)&#123;(b[e]||(b[e]=t("x,y","x "+e+" y")(r,a)&#125;a(e,a,r)&#123;(k[r]||(k[r]=t("x,y","new x[y]("+Array(r+1).join(",x[y]")(1)+")")(e,a)&#125;r(e,a,r)&#123;n,t,s=&#123;&#125;,b=s.d=r?r.d+1:0;for(s["$"+b]=s,t=0;t&lt;b;t)s[n="$"+t]=r[n];for(t=0,b=s=a;t&lt;b;t)s[t]=a[t];c(e,0,s)&#125;c(t,b,k)&#123;u(e)&#123;v[x]=e&#125;f&#123;g=,ting(bg)&#125;l&#123;try&#123;y=c(t,b,k)&#125;catch(e)&#123;h=e,y=l&#125;&#125;for(h,y,d,g,v=[],x=0;;)switch(g=)&#123;case 1:u(!)4:f5:u((e)&#123;a=0,r=e;&#123;c=a&lt;r;c&amp;&amp;u(e[a]),c&#125;&#125;(6:y=,u((y8:if(g=,lg,g=,y===c)b+=g;else if(y!==l)y9:c10:u(s(11:y=,u(+y)12:for(y=f,d=[],g=0;g&lt;y;g)d[g]=y.charCodeAt(g)^g+y;u(String.fromCharCode.apply(null,d13:y=,h=delete [y]14:59:u((g=)?(y=x,v.slice(x-=g,y:[])61:u([])62:g=,k[0]=65599*k[0]+k[1].charCodeAt(g)&gt;&gt;&gt;065:h=,y=,[y]=h66:u(e(t[b],,67:y=,d=,u((g=).x===c?r(g.y,y,k):g.apply(d,y68:u(e((g=t[b])&lt;"&lt;"?(b--,f):g+g,,70:u(!1)71:n72:+f73:u(parseInt(f,3675:if()&#123;bcase 74:g=&lt;&lt;16&gt;&gt;16g76:u(k[])77:y=,u([y])78:g=,u(a(v,x-=g+1,g79:g=,u(k["$"+g])81:h=,[f]=h82:u([f])83:h=,k[]=h84:!085:void 086:u(v[x-1])88:h=,y=,h,y89:u(&#123;e&#123;r(e.y,arguments,k)&#125;e.y=f,e.x=c,e&#125;)90:null91:h93:h=0:;default:u((g&lt;&lt;16&gt;&gt;16)-16)&#125;&#125;n=this,t=n.Function,s=Object.keys||(e)&#123;a=&#123;&#125;,r=0;for(c in e)a[r]=c;a=r,a&#125;,b=&#123;&#125;,k=&#123;&#125;;r'</span>.replace(<span class="regexp">/[-]/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> t[<span class="number">15</span> &amp; e.charCodeAt(<span class="number">0</span>)]</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;(<span class="string">"v[x++]=v[--x]t.charCodeAt(b++)-32function return ))++.substrvar .length(),b+=;break;case ;break&#125;"</span>.split(<span class="string">""</span>)))()(<span class="string">'gr$Daten Иb/s!l y͒yĹg,(lfi~ah`&#123;mv,-n|jqewVxp&#123;rvmmx,&amp;effkx[!cs"l".Pq%widthl"@q&amp;heightl"vr*getContextx$"2d[!cs#l#,*;?|u.|uc&#123;uq$fontl#vr(fillTextx$$龘ฑภ경2&lt;[#c&#125;l#2q*shadowBlurl#1q-shadowOffsetXl#$$limeq+shadowColorl#vr#arcx88802[%c&#125;l#vr&amp;strokex[ c&#125;l"v,)&#125;eOmyoZB]mx[ cs!0s$l$Pb&lt;k7l l!r&amp;lengthb%^l$1+s$jl  s#i$1ek1s$gr#tack4)zgr#tac$! +0o![#cj?o ]!l$b%s"o ]!l"l$b*b^0d#&gt;&gt;&gt;s!0s%yA0s"l"l!r&amp;lengthb&lt;k+l"^l"1+s"jl  s&amp;l&amp;z0l!$ +["cs\'(0l#i\'1ps9wxb&amp;s() &amp;&#123;s)/s(gr&amp;Stringr,fromCharCodes)0s*yWl ._b&amp;s o!])l l Jb&lt;k$.aj;l .Tb&lt;k$.gj/l .^b&lt;k&amp;i"-4j!+&amp; s+yPo!]+s!l!l Hd&gt;&amp;l!l Bd&gt;&amp;+l!l &lt;d&gt;&amp;+l!l 6d&gt;&amp;+l!l &amp;+ s,y=o!o!]/q"13o!l q"10o!],l 2d&gt;&amp; s.&#123;s-yMo!o!]0q"13o!]*Ld&lt;l 4d#&gt;&gt;&gt;b|s!o!l q"10o!],l!&amp; s/yIo!o!].q"13o!],o!]*Jd&lt;l 6d#&gt;&gt;&gt;b|&amp;o!]+l &amp;+ s0l-l!&amp;l-l!i\'1z141z4b/@d&lt;l"b|&amp;+l-l(l!b^&amp;+l-l&amp;zl\'g,)gk&#125;ejo&#123;cm,)|yn~Lij~em["cl$b%@d&lt;l&amp;zl\'l $ +["cl$b%b|&amp;+l-l%8d&lt;@b|l!b^&amp;+ q$sign '</span>, [<span class="built_in">Object</span>.defineProperty(e, <span class="string">"__esModule"</span>, &#123;</span><br><span class="line">        value: !<span class="number">0</span></span><br><span class="line">    &#125;)])</span><br></pre></td></tr></table></figure>
<p>看不懂，所以先执行一下，结果如下，报错<code>e is not defined</code> ，e没有定义，把e的模块单独拿出来</p>
<p><img src="/images/toutiao_7.png" alt=""></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="built_in">Object</span>.defineProperty(e, <span class="string">"__esModule"</span>, &#123;<span class="attr">value</span>: !<span class="number">0</span> &#125;)]</span><br></pre></td></tr></table></figure>
<p>搜了一下方法<code>Object.defineProperty</code> 如下：<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty</a></p>
<p><code>Object.defineProperty() 方法会直接在一个对象上定义一个新属性，或者修改一个对象的现有属性， 并返回这个对象。</code></p>
<p>简单说意思就是，<code>e.__esModule=!0</code>，对于单独获取这一个参数来看，好像没啥用，那就先删掉看看。</p>
<p><img src="/images/toutiao_8.png" alt=""></p>
<p>没报错，不过什么也没有<br>简化一下代码，把字符串都去掉，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>(<span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">'str'</span>.replace(<span class="regexp">/[-]/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> t[<span class="number">15</span> &amp; e.charCodeAt(<span class="number">0</span>)]</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;(<span class="string">"str"</span>.split(<span class="string">"str"</span>)))()(<span class="string">'str'</span>, [&#123;&#125;])</span><br></pre></td></tr></table></figure>
<p>这样就清晰了很多，一点一点看，看里面</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="string">'str'</span>.replace(<span class="regexp">/[-]/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> t[<span class="number">15</span> &amp; e.charCodeAt(<span class="number">0</span>)]</span><br><span class="line">        &#125;)</span><br><span class="line">&#125;(<span class="string">"str"</span>.split(<span class="string">"str"</span>))</span><br></pre></td></tr></table></figure>
<p>相当于把 <code>&quot;str&quot;.split(&quot;str&quot;)</code>这个数组传入函数，然后返回一个字符串。再简化如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>(</span><br><span class="line"> <span class="keyword">return</span> str</span><br><span class="line">)()(<span class="string">'str'</span>, [&#123;&#125;])</span><br></pre></td></tr></table></figure>
<p><code>Function(return str)()</code> 执行结果应该返回一个包含两个参数的的<code>function</code></p>
<p>所以再简化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)(<span class="params"><span class="string">'str'</span>, [&#123;&#125;]</span>)</span></span><br></pre></td></tr></table></figure>
<p>第一个参数是一个字符串，所以返回的东西应该在第二个参数里，即<code>function(a,b)(&#39;str&#39;, [a={}])</code></p>
<p><img src="/images/toutiao_9.png" alt=""></p>
<p>从上图看，已经找到了<code>sign</code>函数，回到<code>var r = (0, m.sign)(n + &quot;&quot;);</code>，把<code>n</code>传入该方法就可以了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = (<span class="number">0</span>, p.default)(),</span><br><span class="line">    n = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">this</span>.url = <span class="keyword">this</span>._url, <span class="string">"refresh"</span> === t ? (n = <span class="keyword">this</span>.list.length &gt; <span class="number">0</span> ? <span class="keyword">this</span>.list[<span class="number">0</span>].behot_time : <span class="number">0</span>, <span class="keyword">this</span>.url += <span class="string">"min_behot_time="</span> + n) : (n = <span class="keyword">this</span>.list.length &gt; <span class="number">0</span> ? <span class="keyword">this</span>.list[<span class="keyword">this</span>.list.length - <span class="number">1</span>].behot_time : <span class="number">0</span>, <span class="keyword">this</span>.url += <span class="string">"max_behot_time="</span> + n);</span><br><span class="line"><span class="keyword">var</span> r = (<span class="number">0</span>, m.sign)(n + <span class="string">""</span>);</span><br><span class="line">(<span class="number">0</span>, o.default)(<span class="keyword">this</span>.params, &#123;</span><br><span class="line">    <span class="keyword">as</span>: e.as,</span><br><span class="line">    cp: e.cp,</span><br><span class="line">    _signature: r</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>可以看到<code>n</code>就是参数<code>min_behot_time</code>，冤家路窄啊。取一个时间戳就行，顺着js往上找一下也行，找到一个<code>behot_time: Math.floor((new Date).getTime() / 1e3)</code>，确实是一个时间戳。</p>
<p>终于凑够了，执行的时候提示没有<code>userAgent</code>信息。设置一下就ok了。<br>最终版本js就出来了，如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">navigator = &#123;&#125;;</span><br><span class="line">navigator.userAgent = <span class="string">"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/67.0.3396.62 Safari/537.36"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getsign</span>(<span class="params">userid</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">Function</span>(</span><br><span class="line">			<span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="string">'e(e,a,r)&#123;(b[e]||(b[e]=t("x,y","x "+e+" y")(r,a)&#125;a(e,a,r)&#123;(k[r]||(k[r]=t("x,y","new x[y]("+Array(r+1).join(",x[y]")(1)+")")(e,a)&#125;r(e,a,r)&#123;n,t,s=&#123;&#125;,b=s.d=r?r.d+1:0;for(s["$"+b]=s,t=0;t&lt;b;t)s[n="$"+t]=r[n];for(t=0,b=s=a;t&lt;b;t)s[t]=a[t];c(e,0,s)&#125;c(t,b,k)&#123;u(e)&#123;v[x]=e&#125;f&#123;g=,ting(bg)&#125;l&#123;try&#123;y=c(t,b,k)&#125;catch(e)&#123;h=e,y=l&#125;&#125;for(h,y,d,g,v=[],x=0;;)switch(g=)&#123;case 1:u(!)4:f5:u((e)&#123;a=0,r=e;&#123;c=a&lt;r;c&amp;&amp;u(e[a]),c&#125;&#125;(6:y=,u((y8:if(g=,lg,g=,y===c)b+=g;else if(y!==l)y9:c10:u(s(11:y=,u(+y)12:for(y=f,d=[],g=0;g&lt;y;g)d[g]=y.charCodeAt(g)^g+y;u(String.fromCharCode.apply(null,d13:y=,h=delete [y]14:59:u((g=)?(y=x,v.slice(x-=g,y:[])61:u([])62:g=,k[0]=65599*k[0]+k[1].charCodeAt(g)&gt;&gt;&gt;065:h=,y=,[y]=h66:u(e(t[b],,67:y=,d=,u((g=).x===c?r(g.y,y,k):g.apply(d,y68:u(e((g=t[b])&lt;"&lt;"?(b--,f):g+g,,70:u(!1)71:n72:+f73:u(parseInt(f,3675:if()&#123;bcase 74:g=&lt;&lt;16&gt;&gt;16g76:u(k[])77:y=,u([y])78:g=,u(a(v,x-=g+1,g79:g=,u(k["$"+g])81:h=,[f]=h82:u([f])83:h=,k[]=h84:!085:void 086:u(v[x-1])88:h=,y=,h,y89:u(&#123;e&#123;r(e.y,arguments,k)&#125;e.y=f,e.x=c,e&#125;)90:null91:h93:h=0:;default:u((g&lt;&lt;16&gt;&gt;16)-16)&#125;&#125;n=this,t=n.Function,s=Object.keys||(e)&#123;a=&#123;&#125;,r=0;for(c in e)a[r]=c;a=r,a&#125;,b=&#123;&#125;,k=&#123;&#125;;r'</span></span><br><span class="line">						.replace(<span class="regexp">/[-]/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">							<span class="keyword">return</span> t[<span class="number">15</span> &amp; e.charCodeAt(<span class="number">0</span>)]</span><br><span class="line">						&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">					(<span class="string">"v[x++]=v[--x]t.charCodeAt(b++)-32function return ))++.substrvar .length(),b+=;break;case ;break&#125;"</span></span><br><span class="line">							.split(<span class="string">""</span>)))</span><br><span class="line">			()</span><br><span class="line">			(</span><br><span class="line">					<span class="string">'gr$Daten Иb/s!l y͒yĹg,(lfi~ah`&#123;mv,-n|jqewVxp&#123;rvmmx,&amp;effkx[!cs"l".Pq%widthl"@q&amp;heightl"vr*getContextx$"2d[!cs#l#,*;?|u.|uc&#123;uq$fontl#vr(fillTextx$$龘ฑภ경2&lt;[#c&#125;l#2q*shadowBlurl#1q-shadowOffsetXl#$$limeq+shadowColorl#vr#arcx88802[%c&#125;l#vr&amp;strokex[ c&#125;l"v,)&#125;eOmyoZB]mx[ cs!0s$l$Pb&lt;k7l l!r&amp;lengthb%^l$1+s$jl  s#i$1ek1s$gr#tack4)zgr#tac$! +0o![#cj?o ]!l$b%s"o ]!l"l$b*b^0d#&gt;&gt;&gt;s!0s%yA0s"l"l!r&amp;lengthb&lt;k+l"^l"1+s"jl  s&amp;l&amp;z0l!$ +["cs\'(0l#i\'1ps9wxb&amp;s() &amp;&#123;s)/s(gr&amp;Stringr,fromCharCodes)0s*yWl ._b&amp;s o!])l l Jb&lt;k$.aj;l .Tb&lt;k$.gj/l .^b&lt;k&amp;i"-4j!+&amp; s+yPo!]+s!l!l Hd&gt;&amp;l!l Bd&gt;&amp;+l!l &lt;d&gt;&amp;+l!l 6d&gt;&amp;+l!l &amp;+ s,y=o!o!]/q"13o!l q"10o!],l 2d&gt;&amp; s.&#123;s-yMo!o!]0q"13o!]*Ld&lt;l 4d#&gt;&gt;&gt;b|s!o!l q"10o!],l!&amp; s/yIo!o!].q"13o!],o!]*Jd&lt;l 6d#&gt;&gt;&gt;b|&amp;o!]+l &amp;+ s0l-l!&amp;l-l!i\'1z141z4b/@d&lt;l"b|&amp;+l-l(l!b^&amp;+l-l&amp;zl\'g,)gk&#125;ejo&#123;cm,)|yn~Lij~em["cl$b%@d&lt;l&amp;zl\'l $ +["cl$b%b|&amp;+l-l%8d&lt;@b|l!b^&amp;+ q$sign '</span>,</span><br><span class="line">					[ TAC = &#123;&#125; ])</span><br><span class="line">	<span class="keyword">var</span> data = TAC.sign(userid + <span class="string">'0'</span>);</span><br><span class="line">	<span class="keyword">return</span> data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="具体视频链接"><a href="#具体视频链接" class="headerlink" title="具体视频链接"></a>具体视频链接</h2><p>上面的链接拼接完成之后，视频列表可以正常请求了，请求回来的数据取一条看一下。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"single_mode"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">"abstract"</span>: <span class="string">"八卦象棋：想重炮将死我，只能对炮了，仅此一步棋可以化解"</span>,</span><br><span class="line"><span class="attr">"middle_mode"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">"more_mode"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">"tag"</span>: <span class="string">"video_sports"</span>,</span><br><span class="line"><span class="attr">"has_gallery"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">"tag_url"</span>: <span class="string">"video"</span>,</span><br><span class="line"><span class="attr">"title"</span>: <span class="string">"八卦象棋：想重炮将死我，只能对炮了，仅此一步棋可以化解"</span>,</span><br><span class="line"><span class="attr">"has_video"</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="attr">"chinese_tag"</span>: <span class="string">"视频"</span>,</span><br><span class="line"><span class="attr">"source"</span>: <span class="string">"八卦讲棋"</span>,</span><br><span class="line"><span class="attr">"group_source"</span>: <span class="number">2</span>,</span><br><span class="line"><span class="attr">"image_url"</span>: <span class="string">"http://p99.pstatp.com/list/190x124/111d9000bc384a1e7c376"</span>,</span><br><span class="line"><span class="attr">"media_url"</span>: <span class="string">"/c/user/63387812477/"</span>,</span><br><span class="line"><span class="attr">"media_avatar_url"</span>: <span class="string">"http://p1.pstatp.com/large/9062000424ee2d9e7539"</span>,</span><br><span class="line"><span class="attr">"video_duration_str"</span>: <span class="string">"15:33"</span>,</span><br><span class="line"><span class="attr">"source_url"</span>: <span class="string">"/group/6622421805481067012/"</span>,</span><br><span class="line"><span class="attr">"article_genre"</span>: <span class="string">"video"</span>,</span><br><span class="line"><span class="attr">"is_feed_ad"</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="attr">"video_id"</span>: <span class="string">"v02004740000bfjp2a8m4cim9gian7o0"</span>,</span><br><span class="line"><span class="attr">"behot_time"</span>: <span class="number">1542366341</span>,</span><br><span class="line"><span class="attr">"comments_count"</span>: <span class="number">11</span>,</span><br><span class="line"><span class="attr">"video_play_count"</span>: <span class="number">3630</span>,</span><br><span class="line"><span class="attr">"group_id"</span>: <span class="string">"6622421805481067012"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>发现并没有视频链接。打开视频详情页。找到一个链接<a href="http://ib.365yg.com/video/urls/v/1/toutiao/mp4/v020041d0000bfl6fafrri6cjb9b5rg0?r=990702939595272&amp;s=2968355509&amp;aid=1364&amp;callback=axiosJsonpCallback1&amp;`_`=1542366691315" target="_blank" rel="noopener">http://ib.365yg.com/video/urls/v/1/toutiao/mp4/v020041d0000bfl6fafrri6cjb9b5rg0?r=990702939595272&amp;s=2968355509&amp;aid=1364&amp;callback=axiosJsonpCallback1&amp;`_`=1542366691315</a></p>
<p><img src="/images/toutiao_10.png" alt=""><br>在返回的数据中看到字段<code>main_url</code>和<code>backup_url_1</code>，这是一个base64加密的链接，解密过后发现正是视频的地址</p>
<p><a href="http://v11-tt.ixigua.com/14adfc0ca3b2f89aaf37e5eb3a64527b/5beeb5b4/video/m/220a890707eded14f439467e0c47f660c15115ed0f000005bcde4968bf8/?rc=M3VlZWZsdWQ5aTMzZzczM0ApQHRAbzk6Njo3MzUzMzY0NDQ0NDVvQGgzdSlAZjN1KWRzcmd5a3VyZ3lybHh3Zjc2QGQyNmczb2NjaV8tLS4tL3NzLW8jbyMxMjEtMC0tLi4uNjMuNS06I28jOmEtcSM6YHZpXGJmK2BeYmYrXnFsOiMzLl4%3D" target="_blank" rel="noopener">http://v11-tt.ixigua.com/14adfc0ca3b2f89aaf37e5eb3a64527b/5beeb5b4/video/m/220a890707eded14f439467e0c47f660c15115ed0f000005bcde4968bf8/?rc=M3VlZWZsdWQ5aTMzZzczM0ApQHRAbzk6Njo3MzUzMzY0NDQ0NDVvQGgzdSlAZjN1KWRzcmd5a3VyZ3lybHh3Zjc2QGQyNmczb2NjaV8tLS4tL3NzLW8jbyMxMjEtMC0tLi4uNjMuNS06I28jOmEtcSM6YHZpXGJmK2BeYmYrXnFsOiMzLl4%3D</a></p>
<p>接下来的任务就是解析获取视频信息的链接，继续拆分参数</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>取值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>990702939595272</td>
<td>变</td>
</tr>
<tr>
<td>s</td>
<td>2968355509</td>
<td>变</td>
</tr>
<tr>
<td>aid</td>
<td>1364</td>
<td>未知</td>
</tr>
<tr>
<td>callback</td>
<td>axiosJsonpCallback1</td>
<td>未知</td>
</tr>
<tr>
<td>_</td>
<td>1542366691315</td>
<td>变</td>
</tr>
</tbody>
</table>
<p>继续上面的过程，找参数</p>
<h4 id="搜索参数"><a href="#搜索参数" class="headerlink" title="搜索参数"></a>搜索参数</h4><p>搜索r，由于太多，搜<code>?r</code> ，找到的各个可疑位置打断点，跟一下。如下图</p>
<p><img src="/images/toutiao_11.png" alt=""><br>发现都在这，不仅有<code>r</code>和<code>s</code>，而且最后直接返回了链接。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> e = <span class="built_in">document</span>.createElement(<span class="string">"a"</span>);</span><br><span class="line">e.href = t;</span><br><span class="line"><span class="keyword">var</span> n = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>, e = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">256</span>), n = <span class="number">0</span>; <span class="number">256</span> !== n; ++n)</span><br><span class="line">            t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = n) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>, e[n] = t;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"undefined"</span> != <span class="keyword">typeof</span> <span class="built_in">Int32Array</span> ? <span class="keyword">new</span> <span class="built_in">Int32Array</span>(e) : e</span><br><span class="line">    &#125;(),</span><br><span class="line">    r = e.pathname + <span class="string">"?r="</span> + <span class="built_in">Math</span>.random().toString(<span class="number">10</span>).substring(<span class="number">2</span>);</span><br><span class="line"><span class="string">"/"</span> !== r[<span class="number">0</span>] &amp;&amp; (r = <span class="string">"/"</span> + r);</span><br><span class="line"><span class="keyword">var</span> i = <span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> e, r, i = <span class="number">-1</span>, o = <span class="number">0</span>, a = t.length; o &lt; a;)</span><br><span class="line">        (e = t.charCodeAt(o++)) &lt; <span class="number">128</span> ? i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ e)] : e &lt; <span class="number">2048</span> ? i = (i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">192</span> | e &gt;&gt; <span class="number">6</span> &amp; <span class="number">31</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | <span class="number">63</span> &amp; e))] : e &gt;= <span class="number">55296</span> &amp;&amp; e &lt; <span class="number">57344</span> ? (e = <span class="number">64</span> + (<span class="number">1023</span> &amp; e), r = <span class="number">1023</span> &amp; t.charCodeAt(o++), i = (i = (i = (i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">240</span> | e &gt;&gt; <span class="number">8</span> &amp; <span class="number">7</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | e &gt;&gt; <span class="number">2</span> &amp; <span class="number">63</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | r &gt;&gt; <span class="number">6</span> &amp; <span class="number">15</span> | (<span class="number">3</span> &amp; e) &lt;&lt; <span class="number">4</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | <span class="number">63</span> &amp; r))]) : i = (i = (i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">224</span> | e &gt;&gt; <span class="number">12</span> &amp; <span class="number">15</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | e &gt;&gt; <span class="number">6</span> &amp; <span class="number">63</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | <span class="number">63</span> &amp; e))];</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span> ^ i</span><br><span class="line">&#125;(r) &gt;&gt;&gt; <span class="number">0</span>;</span><br><span class="line"><span class="keyword">return</span> (location.protocol.indexOf(<span class="string">"http"</span>) &gt; <span class="number">-1</span> ? [location.protocol, e.hostname] : [<span class="string">"http:"</span>, e.hostname]).join(<span class="string">"//"</span>) + r + <span class="string">"&amp;s="</span> + i</span><br></pre></td></tr></table></figure>
<p>看上面代码发现<code>r</code>、<code>s</code>、<code>_</code>三个参数都有了，然后继续往下找<code>aid</code>，然后断点，发现<code>aid</code>是一个定值</p>
<p><img src="/images/toutiao_12.png" alt=""></p>
<p>搜索<code>axiosJsonpCallback</code>发现变化也不大。</p>
<p><img src="/images/toutiao_13.png" alt=""><br>这样链接就凑够了，简单梳理一下js。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_url</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> index = <span class="number">1</span>,aid=<span class="number">1364</span></span><br><span class="line">	<span class="keyword">var</span> url_split=t.split(<span class="string">"ib.365yg.com"</span>)</span><br><span class="line">    <span class="keyword">var</span> n = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> t = <span class="number">0</span>, e = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">256</span>), n = <span class="number">0</span>; <span class="number">256</span> !== n; ++n)</span><br><span class="line">                t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = <span class="number">1</span> &amp; (t = n) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>) ? <span class="number">-306674912</span> ^ t &gt;&gt;&gt; <span class="number">1</span> : t &gt;&gt;&gt; <span class="number">1</span>, e[n] = t;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">"undefined"</span> != <span class="keyword">typeof</span> <span class="built_in">Int32Array</span> ? <span class="keyword">new</span> <span class="built_in">Int32Array</span>(e) : e</span><br><span class="line">        &#125;(),</span><br><span class="line"></span><br><span class="line">        r = url_split[<span class="number">1</span>] + <span class="string">"?r="</span> + <span class="built_in">Math</span>.random().toString(<span class="number">10</span>).substring(<span class="number">2</span>);</span><br><span class="line">    <span class="string">"/"</span> !== r[<span class="number">0</span>] &amp;&amp; (r = <span class="string">"/"</span> + r);</span><br><span class="line">    print(r)</span><br><span class="line">    <span class="keyword">var</span> i = <span class="function"><span class="keyword">function</span>(<span class="params">t</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> e, r, i = <span class="number">-1</span>, o = <span class="number">0</span>, a = t.length; o &lt; a;)</span><br><span class="line">            (e = t.charCodeAt(o++)) &lt; <span class="number">128</span> ? i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ e)] : e &lt; <span class="number">2048</span> ? i = (i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">192</span> | e &gt;&gt; <span class="number">6</span> &amp; <span class="number">31</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | <span class="number">63</span> &amp; e))] : e &gt;= <span class="number">55296</span> &amp;&amp; e &lt; <span class="number">57344</span> ? (e = <span class="number">64</span> + (<span class="number">1023</span> &amp; e), r = <span class="number">1023</span> &amp; t.charCodeAt(o++), i = (i = (i = (i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">240</span> | e &gt;&gt; <span class="number">8</span> &amp; <span class="number">7</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | e &gt;&gt; <span class="number">2</span> &amp; <span class="number">63</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | r &gt;&gt; <span class="number">6</span> &amp; <span class="number">15</span> | (<span class="number">3</span> &amp; e) &lt;&lt; <span class="number">4</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | <span class="number">63</span> &amp; r))]) : i = (i = (i = i &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">224</span> | e &gt;&gt; <span class="number">12</span> &amp; <span class="number">15</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | e &gt;&gt; <span class="number">6</span> &amp; <span class="number">63</span>))]) &gt;&gt;&gt; <span class="number">8</span> ^ n[<span class="number">255</span> &amp; (i ^ (<span class="number">128</span> | <span class="number">63</span> &amp; e))];</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span> ^ i</span><br><span class="line">    &#125;(r) &gt;&gt;&gt; <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">var</span> _ = (<span class="keyword">new</span> <span class="built_in">Date</span>).getTime()</span><br><span class="line">    <span class="keyword">var</span> callback = <span class="string">"axiosJsonpCallback"</span>+index</span><br><span class="line">    <span class="keyword">return</span>  <span class="string">"http://ib.365yg.com"</span>+r + <span class="string">"&amp;s="</span> + i+<span class="string">"&amp;aid="</span>+aid+<span class="string">"&amp;callback="</span>+callback+<span class="string">"&amp;_="</span>+_</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;今日头条视频页&quot;&gt;&lt;a href=&quot;#今日头条视频页&quot; class=&quot;headerlink&quot; title=&quot;今日头条视频页&quot;&gt;&lt;/a&gt;今日头条视频页&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.365yg.com/&quot; target=&quot;_blank&quot; r
    
    </summary>
    
      <category term="技术" scheme="http://www.thinkyixia.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="爬虫" scheme="http://www.thinkyixia.com/tags/%E7%88%AC%E8%99%AB/"/>
    
      <category term="视频" scheme="http://www.thinkyixia.com/tags/%E8%A7%86%E9%A2%91/"/>
    
      <category term="今日头条" scheme="http://www.thinkyixia.com/tags/%E4%BB%8A%E6%97%A5%E5%A4%B4%E6%9D%A1/"/>
    
  </entry>
  
  <entry>
    <title>gif图片资源</title>
    <link href="http://www.thinkyixia.com/2018/07/17/navigation_gif/"/>
    <id>http://www.thinkyixia.com/2018/07/17/navigation_gif/</id>
    <published>2018-07-16T16:00:00.000Z</published>
    <updated>2018-07-16T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.</strong></p>
<h1 id="gif动图资源"><a href="#gif动图资源" class="headerlink" title="gif动图资源"></a>gif动图资源</h1><table>
<thead>
<tr>
<th style="text-align:left">网站名</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">GIF垂直搜索引擎、风格众多</td>
<td style="text-align:left"><a href="http://www.giphy.com" target="_blank" rel="noopener">http://www.giphy.com</a></td>
</tr>
<tr>
<td style="text-align:left">Gifparanoia小众</td>
<td style="text-align:left"><a href="http://www.gifparanoia.org/index.php#" target="_blank" rel="noopener">http://www.gifparanoia.org/index.php#</a></td>
</tr>
<tr>
<td style="text-align:left">Julian Glander幽默插画式</td>
<td style="text-align:left"><a href="http://glander.co/" target="_blank" rel="noopener">http://glander.co/</a></td>
</tr>
<tr>
<td style="text-align:left">Kotaiguchi-gif汉字和立体空间结合起来，营造出古风古韵的同时还有满满的现代感</td>
<td style="text-align:left"><a href="http://kotaiguchi-gif.tumblr.com/" target="_blank" rel="noopener">http://kotaiguchi-gif.tumblr.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Golden Wolf热情年轻</td>
<td style="text-align:left"><a href="http://goldenwolf.tv/" target="_blank" rel="noopener">http://goldenwolf.tv/</a></td>
</tr>
<tr>
<td style="text-align:left">Scorpiondagger恶搞、讽刺、宗教、文化、性</td>
<td style="text-align:left"><a href="http://scorpiondagger.tumblr.com/" target="_blank" rel="noopener">http://scorpiondagger.tumblr.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Rafael-varona文艺清新、小巧精美、轻幽默</td>
<td style="text-align:left"><a href="http://www.rafael-varona.com/" target="_blank" rel="noopener">http://www.rafael-varona.com/</a></td>
</tr>
<tr>
<td style="text-align:left">GIF酷</td>
<td style="text-align:left"><a href="http://www.gifcool.com/" target="_blank" rel="noopener">http://www.gifcool.com/</a></td>
</tr>
<tr>
<td style="text-align:left">打字轨迹特效GIF</td>
<td style="text-align:left"><a href="http://www.livetyping.com" target="_blank" rel="noopener">http://www.livetyping.com</a></td>
</tr>
</tbody>
</table>
<p>持续更新……</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;gif动图资源&quot;&gt;&lt;a href=&quot;#gif动图资源&quot; class=&quot;headerlink&quot; title=&quot;gif动图资源&quot;&gt;&lt;/a&gt;gif动图
    
    </summary>
    
      <category term="工具" scheme="http://www.thinkyixia.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="资源" scheme="http://www.thinkyixia.com/tags/%E8%B5%84%E6%BA%90/"/>
    
      <category term="图片" scheme="http://www.thinkyixia.com/tags/%E5%9B%BE%E7%89%87/"/>
    
      <category term="git动图" scheme="http://www.thinkyixia.com/tags/git%E5%8A%A8%E5%9B%BE/"/>
    
  </entry>
  
  <entry>
    <title>有了这些资源，还需要ui吗？</title>
    <link href="http://www.thinkyixia.com/2018/07/17/navigation_img/"/>
    <id>http://www.thinkyixia.com/2018/07/17/navigation_img/</id>
    <published>2018-07-16T16:00:00.000Z</published>
    <updated>2018-07-16T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.</strong></p>
<h1 id="图片资源网站"><a href="#图片资源网站" class="headerlink" title="图片资源网站"></a>图片资源网站</h1><table>
<thead>
<tr>
<th style="text-align:left">网站名</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">设计导航网</td>
<td style="text-align:left"><a href="http://hao.shejidaren.com/" target="_blank" rel="noopener">http://hao.shejidaren.com/</a></td>
</tr>
<tr>
<td style="text-align:left">矢量图标</td>
<td style="text-align:left"><a href="http://www.iconfont.cn/plus" target="_blank" rel="noopener">http://www.iconfont.cn/plus</a></td>
</tr>
<tr>
<td style="text-align:left">免费高分辨率摄影图片库</td>
<td style="text-align:left"><a href="http://www.gratisography.com" target="_blank" rel="noopener">http://www.gratisography.com</a></td>
</tr>
<tr>
<td style="text-align:left">免费复古照片公共档案库</td>
<td style="text-align:left"><a href="http://nos.twnsnd.co/" target="_blank" rel="noopener">http://nos.twnsnd.co/</a></td>
</tr>
<tr>
<td style="text-align:left">清新精致图片个人网站</td>
<td style="text-align:left"><a href="http://cargocollective.com/" target="_blank" rel="noopener">http://cargocollective.com/</a></td>
</tr>
<tr>
<td style="text-align:left">免费高清壁纸分享网</td>
<td style="text-align:left"><a href="https://unsplash.com/" target="_blank" rel="noopener">https://unsplash.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Raumrot免费高分辨率无版权图片</td>
<td style="text-align:left"><a href="http://publicdomainarchive.com/" target="_blank" rel="noopener">http://publicdomainarchive.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Magdeleine免费高清灵感系图片</td>
<td style="text-align:left"><a href="http://magdeleine.co/" target="_blank" rel="noopener">http://magdeleine.co/</a></td>
</tr>
<tr>
<td style="text-align:left">免费无版权欧美生活图片</td>
<td style="text-align:left"><a href="http://www.lifeofpix.com/" target="_blank" rel="noopener">http://www.lifeofpix.com/</a></td>
</tr>
<tr>
<td style="text-align:left">博客图片</td>
<td style="text-align:left"><a href="http://photopin.com/" target="_blank" rel="noopener">http://photopin.com/</a></td>
</tr>
<tr>
<td style="text-align:left">在线免费高质量商用图片素材</td>
<td style="text-align:left"><a href="https://picjumbo.com/" target="_blank" rel="noopener">https://picjumbo.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Freeimages免费商业图片素材</td>
<td style="text-align:left"><a href="http://cn.freeimages.com/" target="_blank" rel="noopener">http://cn.freeimages.com/</a></td>
</tr>
<tr>
<td style="text-align:left">免费的无版权图像</td>
<td style="text-align:left"><a href="https://pixabay.com/" target="_blank" rel="noopener">https://pixabay.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Death to the Stock Photo 会每月向你发邮件，推荐高质图片</td>
<td style="text-align:left"><a href="http://deathtothestockphoto.com/" target="_blank" rel="noopener">http://deathtothestockphoto.com/</a></td>
</tr>
<tr>
<td style="text-align:left">FoodiesFeed免费高分辨率食品摄影图片</td>
<td style="text-align:left"><a href="http://premium.foodiesfeed.com/" target="_blank" rel="noopener">http://premium.foodiesfeed.com/</a></td>
</tr>
<tr>
<td style="text-align:left">SuperFamous:在线高清摄影图片分享网</td>
<td style="text-align:left"><a href="http://images.superfamous.com/" target="_blank" rel="noopener">http://images.superfamous.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Jay Mantri 拍摄自然风景和人文地理类的摄影作品</td>
<td style="text-align:left"><a href="http://jaymantri.com/" target="_blank" rel="noopener">http://jaymantri.com/</a></td>
</tr>
<tr>
<td style="text-align:left">weheartit文艺灵感系美图</td>
<td style="text-align:left"><a href="http://weheartit.com/" target="_blank" rel="noopener">http://weheartit.com/</a></td>
</tr>
<tr>
<td style="text-align:left">morgue file高质量免费照片</td>
<td style="text-align:left"><a href="https://morguefile.com/search/morguefile/1/pop" target="_blank" rel="noopener">https://morguefile.com/search/morguefile/1/pop</a></td>
</tr>
<tr>
<td style="text-align:left">stockvault高质量优雅与现代照片</td>
<td style="text-align:left"><a href="http://www.stockvault.net/" target="_blank" rel="noopener">http://www.stockvault.net/</a></td>
</tr>
<tr>
<td style="text-align:left">Raumrot复古风格照片</td>
<td style="text-align:left"><a href="http://raumrot.com/" target="_blank" rel="noopener">http://raumrot.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Im Free按钮、模板、图标、体育健康</td>
<td style="text-align:left"><a href="http://www.imcreator.com/free" target="_blank" rel="noopener">http://www.imcreator.com/free</a></td>
</tr>
<tr>
<td style="text-align:left">点播图像与用户摄影分享社区</td>
<td style="text-align:left"><a href="https://freerangestock.com/" target="_blank" rel="noopener">https://freerangestock.com/</a></td>
</tr>
<tr>
<td style="text-align:left">导航式图片素材搜索器</td>
<td style="text-align:left"><a href="http://photorack.net/index.php" target="_blank" rel="noopener">http://photorack.net/index.php</a></td>
</tr>
<tr>
<td style="text-align:left">freepixels导航式图片素材</td>
<td style="text-align:left"><a href="http://www.freepixels.com/" target="_blank" rel="noopener">http://www.freepixels.com/</a></td>
</tr>
<tr>
<td style="text-align:left">免费数字照片</td>
<td style="text-align:left"><a href="http://www.freedigitalphotos.net/" target="_blank" rel="noopener">http://www.freedigitalphotos.net/</a></td>
</tr>
<tr>
<td style="text-align:left">导航式搜索图片合集</td>
<td style="text-align:left"><a href="http://www.freephotosbank.com/" target="_blank" rel="noopener">http://www.freephotosbank.com/</a></td>
</tr>
<tr>
<td style="text-align:left">高分辨率图片</td>
<td style="text-align:left"><a href="http://www.rgbstock.com/" target="_blank" rel="noopener">http://www.rgbstock.com/</a></td>
</tr>
<tr>
<td style="text-align:left">免费图片库</td>
<td style="text-align:left"><a href="http://www.stockphotosforfree.com/" target="_blank" rel="noopener">http://www.stockphotosforfree.com/</a></td>
</tr>
<tr>
<td style="text-align:left">找图就来这</td>
<td style="text-align:left"><a href="http://www.stockfreeimages.com/" target="_blank" rel="noopener">http://www.stockfreeimages.com/</a></td>
</tr>
<tr>
<td style="text-align:left">优秀图片聚集地</td>
<td style="text-align:left"><a href="https://www.dreamstime.com/free-photos" target="_blank" rel="noopener">https://www.dreamstime.com/free-photos</a></td>
</tr>
<tr>
<td style="text-align:left">各式图片总有一款适合你</td>
<td style="text-align:left"><a href="https://500px.com/" target="_blank" rel="noopener">https://500px.com/</a></td>
</tr>
<tr>
<td style="text-align:left">花瓣网</td>
<td style="text-align:left"><a href="http://huaban.com/" target="_blank" rel="noopener">http://huaban.com/</a></td>
</tr>
<tr>
<td style="text-align:left">站酷旗下正版图片</td>
<td style="text-align:left"><a href="http://www.hellorf.com/" target="_blank" rel="noopener">http://www.hellorf.com/</a></td>
</tr>
</tbody>
</table>
<p>持续更新……</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;图片资源网站&quot;&gt;&lt;a href=&quot;#图片资源网站&quot; class=&quot;headerlink&quot; title=&quot;图片资源网站&quot;&gt;&lt;/a&gt;图片资源网站&lt;/
    
    </summary>
    
      <category term="工具" scheme="http://www.thinkyixia.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="资源" scheme="http://www.thinkyixia.com/tags/%E8%B5%84%E6%BA%90/"/>
    
      <category term="图片" scheme="http://www.thinkyixia.com/tags/%E5%9B%BE%E7%89%87/"/>
    
  </entry>
  
  <entry>
    <title>互联网使用小工具</title>
    <link href="http://www.thinkyixia.com/2018/07/17/navigation_tools/"/>
    <id>http://www.thinkyixia.com/2018/07/17/navigation_tools/</id>
    <published>2018-07-16T16:00:00.000Z</published>
    <updated>2018-07-16T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.</strong></p>
<h1 id="小工具、大用途"><a href="#小工具、大用途" class="headerlink" title="小工具、大用途"></a>小工具、大用途</h1><table>
<thead>
<tr>
<th style="text-align:left">网站名</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">PDF转PPT、转word</td>
<td style="text-align:left"><a href="https://smallpdf.com/cn" target="_blank" rel="noopener">https://smallpdf.com/cn</a></td>
</tr>
<tr>
<td style="text-align:left">youtobe视频下载</td>
<td style="text-align:left"><a href="http://www.clipconverter.cc/" target="_blank" rel="noopener">http://www.clipconverter.cc/</a></td>
</tr>
<tr>
<td style="text-align:left">字体转换器在线转换</td>
<td style="text-align:left"><a href="http://www.diyiziti.com/" target="_blank" rel="noopener">http://www.diyiziti.com/</a></td>
</tr>
<tr>
<td style="text-align:left">去除水印</td>
<td style="text-align:left"><a href="http://xiuxiu.web.meitu.com/" target="_blank" rel="noopener">http://xiuxiu.web.meitu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">配色方案查询</td>
<td style="text-align:left"><a href="http://nipponcolors.com/#fujisusutake" target="_blank" rel="noopener">http://nipponcolors.com/#fujisusutake</a></td>
</tr>
<tr>
<td style="text-align:left">语音转文字：讯飞听见</td>
<td style="text-align:left"><a href="https://www.iflyrec.com/" target="_blank" rel="noopener">https://www.iflyrec.com/</a></td>
</tr>
<tr>
<td style="text-align:left">免费好看PPT、word、excel模板</td>
<td style="text-align:left"><a href="http://www.officeplus.cn/Template/Home.shtml" target="_blank" rel="noopener">http://www.officeplus.cn/Template/Home.shtml</a></td>
</tr>
<tr>
<td style="text-align:left">资源搜索：胖次</td>
<td style="text-align:left"><a href="http://panc.cc/" target="_blank" rel="noopener">http://panc.cc/</a></td>
</tr>
<tr>
<td style="text-align:left">百度识图</td>
<td style="text-align:left"><a href="http://image.baidu.com/?fr=shitu" target="_blank" rel="noopener">http://image.baidu.com/?fr=shitu</a></td>
</tr>
<tr>
<td style="text-align:left">价格对比：比一比价</td>
<td style="text-align:left"><a href="http://www.b1bj.com/" target="_blank" rel="noopener">http://www.b1bj.com/</a></td>
</tr>
<tr>
<td style="text-align:left">店铺宝贝排名查询</td>
<td style="text-align:left"><a href="http://www.chapaiming.com/" target="_blank" rel="noopener">http://www.chapaiming.com/</a></td>
</tr>
<tr>
<td style="text-align:left">腾讯移动分析</td>
<td style="text-align:left"><a href="http://mta.qq.com/mta/" target="_blank" rel="noopener">http://mta.qq.com/mta/</a></td>
</tr>
<tr>
<td style="text-align:left">百度指数</td>
<td style="text-align:left"><a href="http://index.baidu.com/" target="_blank" rel="noopener">http://index.baidu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">友盟数据</td>
<td style="text-align:left"><a href="http://www.umindex.com/" target="_blank" rel="noopener">http://www.umindex.com/</a></td>
</tr>
<tr>
<td style="text-align:left">易观数据</td>
<td style="text-align:left"><a href="http://www.analysys.cn/view/home/home.html" target="_blank" rel="noopener">http://www.analysys.cn/view/home/home.html</a></td>
</tr>
<tr>
<td style="text-align:left">中国互联网数据平台</td>
<td style="text-align:left"><a href="http://www.cnidp.cn/enteruser/checkCookie.do?flag=1" target="_blank" rel="noopener">http://www.cnidp.cn/enteruser/checkCookie.do?flag=1</a></td>
</tr>
<tr>
<td style="text-align:left">市场研究数据报告：企鹅智酷</td>
<td style="text-align:left"><a href="http://re.qq.com/" target="_blank" rel="noopener">http://re.qq.com/</a></td>
</tr>
<tr>
<td style="text-align:left">协同写作：石墨</td>
<td style="text-align:left"><a href="https://shimo.im/" target="_blank" rel="noopener">https://shimo.im/</a></td>
</tr>
<tr>
<td style="text-align:left">脑图制作：百度脑图</td>
<td style="text-align:left"><a href="http://naotu.baidu.com/" target="_blank" rel="noopener">http://naotu.baidu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">脑图制作：幕布</td>
<td style="text-align:left"><a href="https://mubu.com/" target="_blank" rel="noopener">https://mubu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">团队协作：Tower</td>
<td style="text-align:left"><a href="https://tower.im/" target="_blank" rel="noopener">https://tower.im/</a></td>
</tr>
<tr>
<td style="text-align:left">小程序制作、网站搭建：上线了</td>
<td style="text-align:left"><a href="https://www.sxl.cn/" target="_blank" rel="noopener">https://www.sxl.cn/</a></td>
</tr>
<tr>
<td style="text-align:left">H5制作：人人秀</td>
<td style="text-align:left"><a href="https://www.rrxiu.net/" target="_blank" rel="noopener">https://www.rrxiu.net/</a></td>
</tr>
</tbody>
</table>
<p>持续更新……</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;小工具、大用途&quot;&gt;&lt;a href=&quot;#小工具、大用途&quot; class=&quot;headerlink&quot; title=&quot;小工具、大用途&quot;&gt;&lt;/a&gt;小工具、大
    
    </summary>
    
      <category term="工具" scheme="http://www.thinkyixia.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="资源" scheme="http://www.thinkyixia.com/tags/%E8%B5%84%E6%BA%90/"/>
    
      <category term="工具" scheme="http://www.thinkyixia.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>优质公众号必备工具</title>
    <link href="http://www.thinkyixia.com/2018/07/17/navigation_wx_tools/"/>
    <id>http://www.thinkyixia.com/2018/07/17/navigation_wx_tools/</id>
    <published>2018-07-16T16:00:00.000Z</published>
    <updated>2018-07-16T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.</strong></p>
<h1 id="你距离优质公众号还有多远？"><a href="#你距离优质公众号还有多远？" class="headerlink" title="你距离优质公众号还有多远？"></a>你距离优质公众号还有多远？</h1><table>
<thead>
<tr>
<th style="text-align:left">网站名</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">10款好用的神器</td>
<td style="text-align:left"><a href="http://mp.weixin.qq.com/s/_76OWDlgopBEQfaNjg76Hw" target="_blank" rel="noopener">http://mp.weixin.qq.com/s/_76OWDlgopBEQfaNjg76Hw</a></td>
</tr>
<tr>
<td style="text-align:left">著名icon搜索引擎、海量图标素材</td>
<td style="text-align:left"><a href="http://iconfinder.com" target="_blank" rel="noopener">http://iconfinder.com</a></td>
</tr>
<tr>
<td style="text-align:left">颜文字素材</td>
<td style="text-align:left"><a href="http://emot.es" target="_blank" rel="noopener">http://emot.es</a></td>
</tr>
<tr>
<td style="text-align:left">公众号文字特效生成器</td>
<td style="text-align:left"><a href="http://megaemoji.com/cn" target="_blank" rel="noopener">http://megaemoji.com/cn</a></td>
</tr>
<tr>
<td style="text-align:left">平铺背景图片素材</td>
<td style="text-align:left"><a href="http://thepatternlibrary.com" target="_blank" rel="noopener">http://thepatternlibrary.com</a></td>
</tr>
<tr>
<td style="text-align:left">图片制作：创客贴</td>
<td style="text-align:left"><a href="https://www.chuangkit.com/" target="_blank" rel="noopener">https://www.chuangkit.com/</a></td>
</tr>
<tr>
<td style="text-align:left">微信插件：新媒体管家</td>
<td style="text-align:left"><a href="https://xmt.cn/index" target="_blank" rel="noopener">https://xmt.cn/index</a></td>
</tr>
<tr>
<td style="text-align:left">微信编辑：135编辑器</td>
<td style="text-align:left"><a href="http://www.135editor.com/" target="_blank" rel="noopener">http://www.135editor.com/</a></td>
</tr>
<tr>
<td style="text-align:left">一键多平台分发：简媒</td>
<td style="text-align:left"><a href="http://www.ejianmedia.com/s/home" target="_blank" rel="noopener">http://www.ejianmedia.com/s/home</a></td>
</tr>
<tr>
<td style="text-align:left">艺术二维码制作</td>
<td style="text-align:left"><a href="http://www.9thws.com/" target="_blank" rel="noopener">http://www.9thws.com/</a></td>
</tr>
<tr>
<td style="text-align:left">二维码生成</td>
<td style="text-align:left"><a href="https://cli.im/" target="_blank" rel="noopener">https://cli.im/</a></td>
</tr>
<tr>
<td style="text-align:left">短链生成</td>
<td style="text-align:left"><a href="http://sina.lt/" target="_blank" rel="noopener">http://sina.lt/</a></td>
</tr>
<tr>
<td style="text-align:left">短链生成</td>
<td style="text-align:left"><a href="http://dwz.cn/" target="_blank" rel="noopener">http://dwz.cn/</a></td>
</tr>
</tbody>
</table>
<p>持续更新……</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;你距离优质公众号还有多远？&quot;&gt;&lt;a href=&quot;#你距离优质公众号还有多远？&quot; class=&quot;headerlink&quot; title=&quot;你距离优质公
    
    </summary>
    
      <category term="工具" scheme="http://www.thinkyixia.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="资源" scheme="http://www.thinkyixia.com/tags/%E8%B5%84%E6%BA%90/"/>
    
      <category term="工具" scheme="http://www.thinkyixia.com/tags/%E5%B7%A5%E5%85%B7/"/>
    
      <category term="微信公众号" scheme="http://www.thinkyixia.com/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>偿一代&amp;偿二代体系下的内含价值计算</title>
    <link href="http://www.thinkyixia.com/2018/04/18/baoxian-6/"/>
    <id>http://www.thinkyixia.com/2018/04/18/baoxian-6/</id>
    <published>2018-04-17T16:00:00.000Z</published>
    <updated>2018-04-17T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>首先需要搞明白什么是偿一代和偿二代？</p>
<p>偿一代和偿二代是两种计算内含价值的体系。2005年保监会编制的《人身保险内含价值报告编制指引》，就是我们常说的偿一代体系。不过2016年保监会放开限制后，当年11月有中国精算师协会编制的《精算实践标准》成为了新的内含价值计算的新依据，这个标准就是偿二代体系。</p>
<hr>
<p>偿一代体系：<br><a href="http://www.51wf.com/print-law?id=190247" target="_blank" rel="noopener">http://www.51wf.com/print-law?id=190247</a><br>偿二代体系：<br><a href="http://www.e-caa.org.cn/systemNews/show/8a7da90a584878e4015884bd60135306?str=%E4%B8%93%E4%B8%9A%E6%A0%87%E5%87%86" target="_blank" rel="noopener">http://www.e-caa.org.cn/systemNews/show/8a7da90a584878e4015884bd60135306?str=%E4%B8%93%E4%B8%9A%E6%A0%87%E5%87%86</a></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;首先需要搞明白什么是偿一代和偿二代？&lt;/p&gt;
&lt;p&gt;偿一代和偿二代是两种计算内含价值的体系。2005年保监会编制的《人身保险内含价值报告编制指引》，就是我们常说的偿一代体系。不过2016年保监会放开限制后，当年11月有中国精算师协会编制的《精算实践标准》成为了新的内含价值计
    
    </summary>
    
      <category term="保险" scheme="http://www.thinkyixia.com/categories/%E4%BF%9D%E9%99%A9/"/>
    
    
      <category term="保险" scheme="http://www.thinkyixia.com/tags/%E4%BF%9D%E9%99%A9/"/>
    
  </entry>
  
  <entry>
    <title>spark on yarn 在集群资源充足的时候任务提交不上去</title>
    <link href="http://www.thinkyixia.com/2018/04/18/yarn-1/"/>
    <id>http://www.thinkyixia.com/2018/04/18/yarn-1/</id>
    <published>2018-04-17T16:00:00.000Z</published>
    <updated>2018-04-17T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h1><p>在跑spark on yarn提交任务的时候，集群资源还有很多，但是一直在排队，始终提交不上去</p>
<h1 id="原因排查"><a href="#原因排查" class="headerlink" title="原因排查"></a>原因排查</h1><p>发现虽然集群中还有很多资源，但是有几台机器的cpu已经用完了</p>
<p>查看yarn的配置文件发现,yarn的资源比较器使用的是DefaultResourceCalculator。<br>配置文件中的注解是说：<br>Capacity Scheduler有两种比较器用以比较两个资源的大小（比如比较用户当前使用的资源量是否超过了设置的上限资源量），默认是DefaultResourceCalculator，它只考虑内存资源。另外一种是DominantResourceCalculator，它采用了DRF比较算法，同时考虑内存和CPU两种资源。</p>
<p>如：在spark on yarn上面进行资源申请，我们申请了10个container(每个container都是1G内存，1个core)，这是集群中有一个nodemanager，有10G内存，5个core。<br>在默认配置情况下，yarn就有可能将这10个container都发送到这个nodemanager上（即使集群上还有其他nodemanager有资源空闲），这就会导致，有5个container需要等到另外5个container用完core之后才能执行其自己的任务。</p>
<p>这样就很容易确定问题了，应该是有些机器内存空间充足，cpu占用严重，但是yarn去分配container的时候，不去管cpu的情况，而只去找内存充足的机器，<br>所以就会出现集群资源充足的情况下，有一部分container在空等core的情况。</p>
<p>capacity-scheduler.xml配置文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">   &lt;name&gt;yarn.scheduler.capacity.resource-calculator&lt;/name&gt;</span><br><span class="line">   &lt;value&gt;org.apache.hadoop.yarn.util.resource.DefaultResourceCalculator&lt;/value&gt;</span><br><span class="line">   &lt;description&gt;</span><br><span class="line">     The ResourceCalculator implementation to be used to compare</span><br><span class="line">     Resources in the scheduler.</span><br><span class="line">     The default i.e. DefaultResourceCalculator only uses Memory while</span><br><span class="line">     DominantResourceCalculator uses dominant-resource to compare</span><br><span class="line">     multi-dimensional resources such as Memory, CPU etc.</span><br><span class="line">   &lt;/description&gt;</span><br><span class="line"> &lt;/property&gt;</span><br></pre></td></tr></table></figure></p>
<h1 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h1><p>我们应该考虑使用DominantResourceCalculator，该资源计算器在计算资源的时候会综合考虑cpu和内存的情况，来决定yarn最后的调度。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;yarn.scheduler.capacity.resource-calculator&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;org.apache.hadoop.yarn.util.resource.DominantResourceCalculator&lt;/value&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;问题背景&quot;&gt;&lt;a href=&quot;#问题背景&quot; class=&quot;headerlink&quot; title=&quot;问题背景&quot;&gt;&lt;/a&gt;问题背景&lt;/h1&gt;&lt;p&gt;在跑spark on yarn提交任务的时候，集群资源还有很多，但是一直在排队，始终提交不上去&lt;/p&gt;
&lt;h1 id=&quot;原因
    
    </summary>
    
      <category term="技术" scheme="http://www.thinkyixia.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="spark" scheme="http://www.thinkyixia.com/tags/spark/"/>
    
      <category term="yarn" scheme="http://www.thinkyixia.com/tags/yarn/"/>
    
  </entry>
  
  <entry>
    <title>保险学习笔记5： 财险公司是如何通过承保业务赚钱的？（上）</title>
    <link href="http://www.thinkyixia.com/2018/04/16/baoxian-5/"/>
    <id>http://www.thinkyixia.com/2018/04/16/baoxian-5/</id>
    <published>2018-04-15T16:00:00.000Z</published>
    <updated>2018-04-15T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>从财险公司的盈利来看，即使不考虑用保险准备金投资带来的投资收益，财险业务本身就可以盈利，即用保费收入扣除赔付支出和其它费用支出后，业务质量较好的财险公司就可以获得承保利润。</p>
<p>这正是财险公司与其它金融中介如商业银行、信托公司、基金公司、资产管理公司的不同之处。<br>金融中介：主要功能是将资金从盈余方转移至需求方，其中商业银行从储户获取资金时，需要支付固定利率的利息；<br>其它金融中介通常不承诺固定利率的利息，但是会向资金提供者收取资产管理费，或者对投资收益进行分成；<br>也就是说，金融中介公司一般需要为资金提供者支付利息或创造投资价值，但是财险公司却无需为资金提供者支付利息和创造投资收益。</p>
<p>巴菲特喜欢财险公司，主要是可以使用大量的低成本保险准备金进行投资而获利。</p>
<p>这部分主要讨论，在不考虑投资收益的情况下，财险公司是如何赚钱或盈利的？</p>
<h1 id="一个简化的财险承保业务分析模型"><a href="#一个简化的财险承保业务分析模型" class="headerlink" title="一个简化的财险承保业务分析模型"></a>一个简化的财险承保业务分析模型</h1><p>一个简单的案例：</p>
<blockquote>
<p>假定美能达财险公司只从事1年期财险业务，2015年，其所有保险业务都是2015年1月1日凌晨0点承保生效的，生效时收到保费总额为100亿元，所有保单都是2015年12月31日24时到期。为了获得这些保险业务，2015年初支出手续费及佣金20亿元，当年公司支出业务管理费15亿元，上交营业税及附加5亿元，当年赔付55亿元，当年所有保险事故的赔款均已全部支付给了客户。</p>
</blockquote>
<p>在不考虑投资收益的情况下，公司的承保利润有多少？如何度量该公司承保业务的绩效呢？<br>1、 承保利润的计算<br>承保利润=保费-赔付-（手续费佣金+业务管理费+营业税及附加）<br>=100-55-（20+15+5）=5（亿元）</p>
<p>2、 承保业务绩效指标<br>可以用赔付率、成本率和承保利润率来测算承保绩效，即<br>赔付率=赔付/保费=55/100=55%<br>成本率=（赔付+其它各种支出）/保费=95/100=95%<br>承保利润率=1-成本率=5%<br>说明，美能达财险公司没收100元保费，赔付支出55元，其它支出40元，承保利润5元。</p>
<p>显然，赔付率越低、成本率越低，承保利润越高，业绩就越好</p>
<p>3、 实际情况下<br>实际情况下，财险公司比上面的案例更复杂一些，主要是三点：<br>第一，财险公司的业务，不止有保险业务，也有非保险业务（保户储金及投资款业务），我们计算承保业务的收入、支出、利润时，通常只考虑保险业务，不考虑非保险业务。</p>
<p>第二，财险公司有分出、分入业务。在计算保费收入时需要增加分入保费、扣除分出保费在计算赔付支出的时候，需要扣除从分入人哪里得到的“摊回赔付支出”；此外，分入、分出业务回带来分保费用和摊回分保费用，即财险公司做为分入人要为分出人支付分保费用（分保佣金），做为分出人则可以从分入人那里收到或摊回分保费用</p>
<p>第三，除少量保险外，绝大多数保险都是1年期的，基本都是跨会计年度的，因此，按照权责发生制，在计算承保业务收入时，需要将未到期责任准备金扣除</p>
<h1 id="承保收入：已赚保费"><a href="#承保收入：已赚保费" class="headerlink" title="承保收入：已赚保费"></a>承保收入：已赚保费</h1><p>1、理解已赚保费<br>考虑到分入、分出因素和保险合同跨会计年度需要适用责权发生制的因素，我们将对应于当期的实际保费收入称为“已赚保费”</p>
<blockquote>
<p>已赚保费=保费收入+（分入保费-分出保费）-（期末未到期责任准备金-期初未到期责任准备金）=保费收入+分入保费-分出保费-提提取未到期责任准备金</p>
</blockquote>
<p>其中，提取未到期责任准备金=期末未到期责任准备金-期初未到期责任准备金。可以这样理解，因为财险基本都是1年的合同，所以期初未到期的责任准备金，今年全部都可以到期，然后转化称收入，而期末未到期的基本都是今年交的，这部分在算已赚保费的时候需要扣除。</p>
<p>2、已赚保费案例</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;从财险公司的盈利来看，即使不考虑用保险准备金投资带来的投资收益，财险业务本身就可以盈利，即用保费收入扣除赔付支出和其它费用支出后，业务质量较好的财险公司就可以获得承保利润。&lt;/p&gt;
&lt;p&gt;这正是财险公司与其它金融中介如商业银行、信托公司、基金公司、资产管理公司的不同之处。&lt;
    
    </summary>
    
      <category term="保险" scheme="http://www.thinkyixia.com/categories/%E4%BF%9D%E9%99%A9/"/>
    
    
      <category term="保险" scheme="http://www.thinkyixia.com/tags/%E4%BF%9D%E9%99%A9/"/>
    
  </entry>
  
  <entry>
    <title>保险学习笔记3：保险负债的计量上</title>
    <link href="http://www.thinkyixia.com/2018/04/14/baoxian-3/"/>
    <id>http://www.thinkyixia.com/2018/04/14/baoxian-3/</id>
    <published>2018-04-13T16:00:00.000Z</published>
    <updated>2018-04-13T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>保险公司的负债主要分为以下三种负债：</p>
<table>
<thead>
<tr>
<th>保费收入</th>
<th></th>
<th>负债</th>
</tr>
</thead>
<tbody>
<tr>
<td>原保险保费收入</td>
<td>保险合同准备金</td>
<td>未到期责任准备金、未决赔款准备金、寿险责任准备金、长期健康险责任准备金</td>
</tr>
<tr>
<td>保户投资款新增交费</td>
<td></td>
<td>保户储金及投资款</td>
</tr>
<tr>
<td>投连险独立账户新增交费</td>
<td></td>
<td>独立账户负债</td>
</tr>
</tbody>
</table>
<p>那这三类负债在保险公司负债表中是怎么计量的呢？</p>
<h1 id="独立账户负债的计量"><a href="#独立账户负债的计量" class="headerlink" title="独立账户负债的计量"></a>独立账户负债的计量</h1><p>由于投连险的投资账户，是有客户承担全部风险，保险公司只收取资产管理费，所以，独立账户负债按公允价值进行初始确认，以公允价值进行后续计量，盈亏都是客户的。</p>
<h1 id="保户储金及投资款的计量"><a href="#保户储金及投资款的计量" class="headerlink" title="保户储金及投资款的计量"></a>保户储金及投资款的计量</h1><p>除投连险之外的所有非保险合同交费都计入保户储金和投资款。<br>对于保户储金来说，保险公司需要逐年/月为客户支付利息，可能是固定利率也可能是浮动利率。因此，保户储金及投资款按公允价值进行初始确认，按摊余成本进行后续计量。</p>
<h1 id="保险合同准备金的计量方法"><a href="#保险合同准备金的计量方法" class="headerlink" title="保险合同准备金的计量方法"></a>保险合同准备金的计量方法</h1><p>保险合同准备金，由未到期责任准备金、未决赔款准备金、寿险责任准备金（未到期+未决）、长期健康险责任准备金（未到期+未决）<br>保险合同准备金很特殊：一方面是因为投资收益的不确定性带来的支付给客户的利息的不确定性。二是由于客户群死亡率、发病率、退保率的不确定性带来的给付不确定性。</p>
<p>总的可以将四类保险合同准备金归并为两类：未决赔款准备金和未到期责任准备金。</p>
<h2 id="未决赔款准备金的计量方法"><a href="#未决赔款准备金的计量方法" class="headerlink" title="未决赔款准备金的计量方法"></a>未决赔款准备金的计量方法</h2><p>未决赔款准备金包括：已发生已报案未决赔款准备金、已发生未报案未决赔款准备金和理赔费用准备金<br>已发生已报案未决赔款准备金，保险公司采用<strong>逐案估损法、案均赔款法</strong>等方法，已最终赔付的合理估值为基础，计量这部分准备金<br>已发生未报案未决赔款准备金，根据<strong>链梯法、案均赔款法、准备金进展法、B－F法</strong>等方法，已最终赔付的合理估计金额为基础，计量这部分准备金</p>
<p>对于理赔费用准备金，保险公司可以未来必须发生的理赔费用的合理估计为基础，计量理赔费用准备金。</p>
<h2 id="未到期责任准备金的计量方法"><a href="#未到期责任准备金的计量方法" class="headerlink" title="未到期责任准备金的计量方法"></a>未到期责任准备金的计量方法</h2><p>未到期责任准备金的计算公式：<br>未到期责任准备金=合理估计负债+风险边际+剩余边际</p>
<ul>
<li>合理估计负债<br>是指对保单未来预期净现金流出的现值的合理估计，由于未来净现金流出有不确定性，这个合理估计就是指预期净现金流出的期望值。<br>就是自己估计一个未来这些保单可能产生的赔付有多少</li>
<li>风险边际<br>是指为应对预期现金流不确定性而提取的准备金。同样，由于未来净现金流出有不确定性，在合理估计负债基础上增加一点准备金（风险边际）会让保险公司对未来感觉心里更踏实。<br>在合理负债的基础上多准备一点钱，为了预防不确定风险的发生</li>
<li>剩余边际<br>是指保单隐含的未来利润，将在未来保险期间逐渐摊销或实现。正常情况下，保险公司销售保单，由于预收保费的原因，保费中实际都包含着一定额度的未来利润。<strong>按照（《保险合同相关会计处理规定》（财会[2009]15号），保险人在保险合同初始确认日不应当确认首日利得，于是就将本来赚到的“首日利得”作为剩余边际放在准备金里</strong></li>
</ul>
<hr>
<blockquote>
<p>剩余边际的小案例<br>一家寿险公司向一位40岁的客户销售了一份交费100万元的终身年金保险合同，销售费用是5万，销售结束后，落到保险公司口袋里的是95万元。</p>
</blockquote>
<p>保险公司对这张保单的未来给付进行合理估计并折现，合理估计负债为88万元，再考虑风险边际2万元，只要准备90万，未来给付就应该足够了。这样保险公司口袋里有95万，多出来的5万就是潜在利润，如果不出意外，保险公司已经赚了5万，因此称为“<strong>首日利得</strong>”</p>
<p>如果现在就将这5万元确认为利润，保险公司再未来几十年的保单期限内，就无法从这张保单上获取利润了，这显然不合理。因此，《保险合同相关会记处理规定》明确，保险人再保险合同初始确认日不应当确认首日利得。</p>
<p>于是，保险公司将这5万元作为剩余边际放在未到期责任准备金里，以后在保险期限内逐步释放，逐步确认为利润。</p>
<hr>
<p>未确认概念：<br>摊余成本？</p>
<hr>
<p>学习资料来自微信公众号：保险神潭</p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;保险公司的负债主要分为以下三种负债：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;保费收入&lt;/th&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th&gt;负债&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;原保险保费收入&lt;/td&gt;
&lt;td&gt;保险合同准备金&lt;
    
    </summary>
    
      <category term="保险" scheme="http://www.thinkyixia.com/categories/%E4%BF%9D%E9%99%A9/"/>
    
    
      <category term="保险" scheme="http://www.thinkyixia.com/tags/%E4%BF%9D%E9%99%A9/"/>
    
  </entry>
  
  <entry>
    <title>保险学习笔记4： 保险负债计量下（保险公司到底欠客户多少钱？）</title>
    <link href="http://www.thinkyixia.com/2018/04/14/baoxian-4/"/>
    <id>http://www.thinkyixia.com/2018/04/14/baoxian-4/</id>
    <published>2018-04-13T16:00:00.000Z</published>
    <updated>2018-04-13T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>本文主要还是对未到期责任准备金计量方式进行学习整理。</p>
<h1 id="未到期责任准备金的计量"><a href="#未到期责任准备金的计量" class="headerlink" title="未到期责任准备金的计量"></a>未到期责任准备金的计量</h1><p>上一篇博客曾说过，未到期责任准备金包括合计估计负债、风险边际和剩余边际，下面分别讨论。</p>
<h2 id="合理估计负债"><a href="#合理估计负债" class="headerlink" title="合理估计负债"></a>合理估计负债</h2><p>基本含义就是，通过未来法对保险合同产生的预期净现金流出的合理估计</p>
<p>1、 估计预期净现金流出<br>某一保单年度预期净现金流出= 预期现金流出-预期现金流入<br>预期现金流出=保证利益给付（保险事故赔付、生存给付、满期给付等）+非保证利益给付（保单红利等）+管理费用支出（保单维持、理赔等）</p>
<p>预期现金流入=保险费</p>
<p>显然，在计算预期净现金流出时需要根据实际经验和未来发展趋势，作一系列的假设，包括保险事故发生率（如死亡率、发病率、残疾率、狐狸状态发生率、火灾发生率等）、退保率、费用、通货膨胀率、保单红利等</p>
<p>2、估计折现率<br>对于短险的未到期责任准备金，由于负债实际小于等于1年，因此不考虑货币时间价值</p>
<p>对于长期未到期责任准备金，即寿险责任准备金和长期健康险责任准备金，负债时间超过1年，需要考虑货币时间价值，其折现率应当以资产负债表日可以获取的当前信息为基础确定。</p>
<ul>
<li>普通寿险准备金的折现率<br>普通寿险采用预定利率，因此<br>第一，其未来保单利益和保险公司资产投资收益率无关；<br>第二，保险公司在投资时不能有闪失，所以，投资风格比较保守。于是，普通寿险准备金的折现率在相应期限的国债收益率基础上确定。即<blockquote>
<p>折现率=基准利率+溢价</p>
</blockquote>
</li>
</ul>
<p>对于基准利率，保险公司通常选择三年移动平均国债到期收益率确定；此外，保险公司会考虑流动性溢价、税收等因素，在基准利率基础上增加一定的溢价。总体而言，折现率反映了保险公司在投资时的风险偏好</p>
<ul>
<li>新型寿险准备金的折现率<br>对于未来保险利益随保险公司资产投资收益变动的保险，如分红险、万能险，折现率根据对应资产组合预期产生的未来投资收益率确定。具体而言，保险公司会在考虑未来宏观经济状况、未来资产组合、投资策略、再投资策略、市场利率变动等因素基础上综合确定，同时反映了保险公司在投资时的风险偏好</li>
</ul>
<p>分红、万能险有保底利率，但通常保底利率都低于普通寿险预定利率，所以，投资风险相对可以激进一点，折现率可能相对高一点。</p>
<h2 id="风险边际"><a href="#风险边际" class="headerlink" title="风险边际"></a>风险边际</h2><p>风险边际指为应对预期现金流的不确定性或风险而在合理估计负债基础上多提的准备金。这里的风险既包括保险风险，也包括投资风险。<br>保险风险主要体现在未来赔付和退保等现金流出的不确定性；<br>投资风险主要是指保险公司的投资收益率会随着宏观经济环境的变化起伏不定，导致折现率假设很可能出现偏差。若折现率假设太高（对未来投资收益率预期过高），就会导致准备金提取不足。</p>
<blockquote>
<p>风险边际的计算，常用的方法是：<br>寿险风险边际=不利情境下的负债-基于合理估计假设的负债<br>非寿险风险边际=合理估计负债 * 风险边际率</p>
</blockquote>
<p>当然，也有寿险工商所将直接在折现率的假设上考虑率风险边际，即合理估计负债的折现率假设的略微低一点，就可以将负债估计的多一点，这样就直接包含率风险边际，中国人寿就采用的这种计算方法。</p>
<h2 id="剩余边际"><a href="#剩余边际" class="headerlink" title="剩余边际"></a>剩余边际</h2><p>剩余边际是指保单隐含的未来利润，是为了达到“首日不确认利得”的目的而存在的边际。或者说，既然保险合同首日不缺人盈利，那就只好将盈利起名为“剩余边际”包含在准备金中。<br>事实上，如果保险公司定价保守，自然会产生首日利得，但若定价过于激进，也会产生首日亏损。因此，下面分“存在首日利得”与“存在首日损失”两种情况讨论其剩余边际。</p>
<p>1、存在首日利得时的剩余边际<br>当“<strong>可观察的保险合同负债的市场价值&gt;（合理估计负债+风险边际）</strong>”时，存在首日利得，首日利得等于前者与后者之差，遵照保险合同首日不确认利得的规定，此时，剩余边际=首日利得。即：</p>
<blockquote>
<p>剩余边际=可观察的保险合同负债的市场价值-（合理估计负债+风险边际）<br> 可观察的保险合同负债的市场价值=保费收入-市场一致的保单获取成本</p>
</blockquote>
<p><strong>市场一致的保单获取成本</strong>是指保险公司获取这份保险合同所花费的费用，包括销售费用、相关增值税、缴纳的保险保障基金等。</p>
<p>因此，<strong>可观察的保险合同负债的市场价值</strong>就是指保险公司销售这份保单后，将保费扣除直接费用开销后真正落到自己手里的部分。</p>
<p>2、存在首日损失时的剩余边际<br>当“<strong>可观察的保险合同负债的市场价值&lt;（合理估计负债+风险边际）</strong>”时，存在首日损失，首日损失等于后者与前者之差，此时，剩余边际=0。<br>你可以考虑到，如果将首日损失计入未到期责任准备金，会导致准备金不足，于是，首日损失不计入准备金，而是直接计入损益表，确认亏损。</p>
<p>3、剩余边际小结<br>剩余边际其实就是“<strong>过去法计算的准备金</strong>”与“<strong>未来法计算的准备金</strong>”之差。因为，按照过去法，未到期责任准备金=保费收入-市场一直获取成本；按照未来法，未到期责任准备金=未来净现金流出折现=合理估计负债+风险边际<br>如果存在首日利得，将其做为剩余边际，计入准备金。在保险期间，逐步将剩余边际摊销计入当期损益。<br>若存在首日损失，说明保险定价不足，已经造成亏损，将亏损额“首日亏损”计入当期损益表。所谓当期损益表，其实就是在利润表中的营业支出中“<strong>提取保险责任准备金</strong>”计算中，对所有产生首日损失的保单按照“<strong>合理估计负债+风险边际</strong>”来足额计算其准备金。</p>
<h2 id="未到期责任准备金估计案例"><a href="#未到期责任准备金估计案例" class="headerlink" title="未到期责任准备金估计案例"></a>未到期责任准备金估计案例</h2><p>1、财险未到期责任准备金计量案例</p>
<blockquote>
<p>2016年2月1日幸福财产保险公司与革命矿业公司签订了财产保险合同，收取保费20万元，市场一致的保单获取成本为2万元。在合同签订日，幸福财险合理估计未来一年内保单赔款和理赔费用以及保单维持费用的基础上，计算出合理估计负债为16万元，风险边际根据理赔经验按照合理估计负债的4%计算。</p>
</blockquote>
<p>计算出幸福财险计算这张保单在签订时的未到期责任准备金。</p>
<blockquote>
<p>合理估计负债=16w<br>市场一致的保单获取成本=2w<br>风险边际=16w*4%=0.64w<br>可观察的风险合同负债的市场价值=20w-2w=18w<br>首日利得=18w-（16w+0.64w）=1.36w<br>剩余边际=首日利得=1.36w<br>未到期责任准备金=16w+0.64w+1.36w=18w</p>
</blockquote>
<p>案例启示：对短期保险来说：</p>
<ul>
<li>剩余边际就是保险公司的预期承保利润</li>
<li>如果未来现金流出符合预期，风险边际其实也会变成承保利润</li>
<li>由于在计算准备金时未考虑货币世界价值，所以，未到期责任准备金产生的投资收益也将成为保险公司利润组成部分。即：“<strong>保险公司利润=剩余边际+风险边际+投资收益</strong>”。当然，在不利的条件下，风险边际甚至部分或全部剩余边际都会被用来支付未来赔付和理赔费用。</li>
</ul>
<p>2、长期寿险责任准备金计量案例</p>
<blockquote>
<p>张先生趸交保费10万元购买来美好生活寿险公司的5年期普通寿险（预定利率5%），该保单的保险责任为：1）被保险人5年内发生意外身故，保险公司给付15万元；2）被保险人生存至5年末，保险公司给付12.5万元。通过对该保单进行重大风险测试，美好生活寿险公司将该保单确认为保险合同。该保单的市场一致获取成本为3000元。</p>
</blockquote>
<p>计算出美好生活寿险公司这张保单在签订时的寿险责任准备金。<br>为简化计算，忽略意外身故给付成本。</p>
<ul>
<li><p>情形1：存在首日利得</p>
<blockquote>
<p>合理估计负债=12.5/1.08^5=8.5（万元）（忽略意外身故给付成本，折现率假定保险公司根据国债收益率曲线确定为8%）<br>风险边际=不利情境下的负债-合理估计负债=12.5/1.06^5-12.5/1.08^5 = 0.83（万元）（不利情境只考虑投资收益率下降带来的折现率下降，忽略意外死亡率增加的不利情形）<br>剩余边际=首日利得=（保费收入-市场一直获取成本）-（合理估计负债+风险边际）=（10-0.3）-（8.5+0.83）=0.37（万元）<br>寿险责任准备金=8.5+0.83+0.37=9.7（万元）</p>
</blockquote>
</li>
<li><p>情形2：存在首日损失</p>
<blockquote>
<p>合理估计负债=12.5/1.06^5=9.33（万元）（折现率假定为6%）<br>风险边际=不利情境下的负债（折现率降为5%）-合理估计负债=12.5/1.05^5-12.5/1.06^5=9.77-9.33=0.44（万元）<br>首日损失=（合理估计负债+风险边际）-（保费收入-市场一致获取成本）=（9.33+0.44）-（10-03）=0.07（万元）<br>剩余边际=0<br>寿险责任准备金=9.33+0.44+0=9.77（万元）</p>
</blockquote>
</li>
</ul>
<p>案例启示：对于长期保险来说，提取合理估计负债后，如果未来与当下的预期相同，未来收支已经平衡了，所以，剩余边际就是未来利润的现职，风险边际其实也会转变成利润。<br>不过，如果未来比预期差，风险边际就会转变成保险公司的支出，如果还不够，剩余边际也得用来满足支出。</p>
<h2 id="案例：中国人寿的保险合同准备金变化"><a href="#案例：中国人寿的保险合同准备金变化" class="headerlink" title="案例：中国人寿的保险合同准备金变化"></a>案例：中国人寿的保险合同准备金变化</h2><p>因为寿险公司既做短期又做长期，主要有四项保险合同准备金（未到期责任准备金、未决赔款准备金、寿险责任准备金、长期健康险责任准备金），而产险公司通常只做短险，主要有两项保险合同准备金（未到期责任准备金、未决赔款准备金），所以，用寿险公司的保险合同准备金变化就可以理解保险公司的准备金变化原理</p>
<p>下图是中国人寿2015年年报中的保险合同准备金变化情况</p>
<p><img src="/images/baoxian-4-1.png" alt=""></p>
<p>我们可以看出：<br>第一、准备金是一个池子，是存量，会随着资金流入流出发生变化。中国人寿的四项保险合同准备金合计金额，从14年12月31的16034.46亿到15年12月31的17159.85亿元。各项准备金都有所变化。<br>第二、期末未到期责任准备金=期初未到期责任准备金+本年增加额（本新增保费首日准备金）-期初未到期责任准备金（本年全部到期了），因此，中国人寿的未到期责任准备金从年初的72.3亿元变为年底的79.44亿元。<br>第三、期末未决赔款准备金=期初未决赔款准备金+本年增加额（当年年底的未决）-赔付款项（起初未决全部都在当年赔掉了），因此，中国人寿的未决赔款准备金从年初的73.16亿变为年底的92.68亿<br>第四、期末寿险（长期健康险）责任准备金=期初寿险（长期健康险）责任准备金+本年增加额（包括当年入账保费首日准备金、准备金增值）-赔付款项-提前解除合同退保金+准备金调整金额（主要指精算变更导致的调整），由此，中国人寿的寿险责任准备金、长期健康险责任准备金从年初的15589.7亿、299.3亿变为年底的16527.63亿、460.1亿</p>
<hr>
<p>学习资料来自微信公众号：保险神潭</p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文主要还是对未到期责任准备金计量方式进行学习整理。&lt;/p&gt;
&lt;h1 id=&quot;未到期责任准备金的计量&quot;&gt;&lt;a href=&quot;#未到期责任准备金的计量&quot; class=&quot;headerlink&quot; title=&quot;未到期责任准备金的计量&quot;&gt;&lt;/a&gt;未到期责任准备金的计量&lt;/h1&gt;&lt;p&gt;
    
    </summary>
    
      <category term="保险" scheme="http://www.thinkyixia.com/categories/%E4%BF%9D%E9%99%A9/"/>
    
    
      <category term="保险" scheme="http://www.thinkyixia.com/tags/%E4%BF%9D%E9%99%A9/"/>
    
  </entry>
  
  <entry>
    <title>保险学习笔记2：理解保险负债</title>
    <link href="http://www.thinkyixia.com/2018/04/13/baoxian-2/"/>
    <id>http://www.thinkyixia.com/2018/04/13/baoxian-2/</id>
    <published>2018-04-12T16:00:00.000Z</published>
    <updated>2018-04-12T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>保险公司负债形式有很多，我们只讨论最重要的，也是特有负债，由规模保费（包含保险业务保费和非保险合同保费）产生的准备金或类似于准备金的负债，这部分负债在保险公司负债中的占比最大，约80%左右。</p>
<h1 id="三种保费对应三类负债"><a href="#三种保费对应三类负债" class="headerlink" title="三种保费对应三类负债"></a>三种保费对应三类负债</h1><table>
<thead>
<tr>
<th>保费收入</th>
<th></th>
<th>负债</th>
</tr>
</thead>
<tbody>
<tr>
<td>原保险保费收入</td>
<td>保险合同准备金</td>
<td>未到期责任准备金、未决赔款准备金、寿险责任准备金、长期健康险责任准备金</td>
</tr>
<tr>
<td>保户投资款新增交费</td>
<td></td>
<td>保户储金及投资款</td>
</tr>
<tr>
<td>投连险独立账户新增交费</td>
<td></td>
<td>独立账户负债</td>
</tr>
</tbody>
</table>
<p>对于这三种负债，可以这样理解：<br>1、负债是存量不是流量，是历年保险业务累计形成的<br>2、相当于保险公司有三个大水池，分别对应三种负债，每个水池有进水管和出水管，进水管流入的是新保费产生的准备金（或投资款）及其增加值（或将要支付给客户的投资收益）；出水管流出的是保险金给付和退保金；在某一时刻留在水池中的金额就是负债金额。</p>
<h1 id="对三类负债的具体解释"><a href="#对三类负债的具体解释" class="headerlink" title="对三类负债的具体解释"></a>对三类负债的具体解释</h1><p>1、对于短期纯保障性保险，即各类1年期及1年期以下的保障性保险，保险公司从保费收入中提取准备金，形成资产负债表中的“未到期责任准备金和未决赔款准备金”<br>2、对于经过重大保险风险测试、归类为保险合同的长期保障储蓄性保险（普通寿险和分红险）而言，保险公司会从保费中提取准备金，形成资产负债表中的“寿险责任准备金和长期健康险责任准备金”<br>寿险责任准备金：长期寿险的未到期责任准备金和未决赔款准备金之和；<br>长期健康险责任准备金：长期健康险的未到期责任准备金和未决赔款准备金之和<br>3、对于未经过重大保险风险测试、归类为非保险合同的长期保障储蓄性保险（普通寿险和分红险）而言，保费收入计入保护投资款新增交费，形成负债中的”保户储金及投资款“<br>4、对于可拆分的万能险，将进入个人账户的保费计入投资款，形成负债表中的“保户储金及投资款”<br>5、对于可拆分的投资连结保险，将进入投资账户的保费计入投资款，形成了负债表中的独立账户负债。</p>
<h1 id="产险公司的负债及其特点"><a href="#产险公司的负债及其特点" class="headerlink" title="产险公司的负债及其特点"></a>产险公司的负债及其特点</h1><h2 id="产险公司负债"><a href="#产险公司负债" class="headerlink" title="产险公司负债"></a>产险公司负债</h2><p>由于纯保障性保险都是短期的，其准备金有两个：未到期责任准备金和未决赔款准备金。</p>
<ul>
<li>未到期责任准备金<br>也称为未赚保费，是指在会计年度决算时，对未满期保险单提存的对应于剩余保险期限的保险责任的准备金。<br>就是投保人买的保险还没有到期，你需要提取出一部分钱来准备着，以预防投保人在剩余保险期间有什么问题。</li>
<li>未决赔款准备金<br>指保险事故已经发生在本会计年度内，但是保险公司因为责任界定、理赔程序未完成等原因尚未赔偿或未给付保险金，这部分资金也需要从保费中提取出来。<h2 id="产险负债的特点（以平安产险为例）"><a href="#产险负债的特点（以平安产险为例）" class="headerlink" title="产险负债的特点（以平安产险为例）"></a>产险负债的特点（以平安产险为例）</h2>在负债表中可以看出，其主要的负债就是未到期责任准备金和未决赔款准备金。</li>
</ul>
<h1 id="寿险公司负债及其特点"><a href="#寿险公司负债及其特点" class="headerlink" title="寿险公司负债及其特点"></a>寿险公司负债及其特点</h1><h2 id="保险业务负债"><a href="#保险业务负债" class="headerlink" title="保险业务负债"></a>保险业务负债</h2><p>从保险业务看，寿险公司经营以长期保险业务为主，也经营短期保障性保险。长期保险准备金有两个：寿险责任准备金和长期健康险责任准备金。<br>寿险责任准备金来源于长期寿险业务：两全保险、终身寿险、年金保险等；<br>长期健康险责任准备金来源于长期健康险业务：长期重疾险、长期护理险等；</p>
<h2 id="非保险业务"><a href="#非保险业务" class="headerlink" title="非保险业务"></a>非保险业务</h2><p>从非保险业务看，万能险的个人帐户的保户储金和投资款负债，投连险投资账户的独立账户负债，以及未经过重大保险风险测试的普通寿险和分红险业务产生的保户储金和投资款负债。</p>
<h2 id="寿险公司负债特点"><a href="#寿险公司负债特点" class="headerlink" title="寿险公司负债特点"></a>寿险公司负债特点</h2><p>1、多数寿险公司以保险业务为主、非保险业务为辅，所以负债以保险业务带来的保险合同准备金（包括未到期责任准备金、未决赔款准备金、寿险责任准备金和长期健康险责任准备金）为主<br>2、多数寿险公司以长期保险为主、短期保险为辅，因此，负债以保险业务带来的长期负债（寿险责任准备金和长期健康险责任准备金）为主<br>3、多数寿险公司以长期寿险为主、长期健康险为辅，因此，负债都以寿险责任准备金为主</p>
<hr>
<p>学习资料来自微信公众号：保险神潭</p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;保险公司负债形式有很多，我们只讨论最重要的，也是特有负债，由规模保费（包含保险业务保费和非保险合同保费）产生的准备金或类似于准备金的负债，这部分负债在保险公司负债中的占比最大，约80%左右。&lt;/p&gt;
&lt;h1 id=&quot;三种保费对应三类负债&quot;&gt;&lt;a href=&quot;#三种保费对应三
    
    </summary>
    
      <category term="保险" scheme="http://www.thinkyixia.com/categories/%E4%BF%9D%E9%99%A9/"/>
    
    
      <category term="保险" scheme="http://www.thinkyixia.com/tags/%E4%BF%9D%E9%99%A9/"/>
    
  </entry>
  
  <entry>
    <title>保险学习笔记1：保险公司保费收入</title>
    <link href="http://www.thinkyixia.com/2018/04/12/baoxian-1/"/>
    <id>http://www.thinkyixia.com/2018/04/12/baoxian-1/</id>
    <published>2018-04-11T16:00:00.000Z</published>
    <updated>2018-04-11T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/baoxian-1.png" alt=""><br><img src="/images/baoxian-2.png" alt=""></p>
<h1 id="保费收入"><a href="#保费收入" class="headerlink" title="保费收入"></a>保费收入</h1><p>保险公司的保费收入分为三种</p>
<ul>
<li>原保险保费收入</li>
<li>保户投资款新增交费</li>
<li>投连险独立账户新增交费<br>对于任何一家保险公司来说，这三者之和称为规模保费，而将原保险收入称为保费收入。</li>
</ul>
<p>所有保险的产品分为三类</p>
<ul>
<li>纯保障性保险</li>
<li>保障储蓄性保险</li>
<li>纯投资性保险<br>那这三类保险都是怎么确认保费收入的呢，是确认为原保险保费收入、保户投资款新增交费，还是投连险独立账户新增交费呢？<br>那我们分别讨论一下。</li>
</ul>
<h2 id="纯保障性保险产生原保费收入"><a href="#纯保障性保险产生原保费收入" class="headerlink" title="纯保障性保险产生原保费收入"></a>纯保障性保险产生原保费收入</h2><p>纯保障性保险又称为消费性保险，期限都在1年或1年以下，如各类的财险、意外险、医疗险等。这类保险的特点是只有保障功能，保单没有现金价值或账户价值，即没有任何投资功能。</p>
<p>对于纯保障性保险，客户缴纳保费后，自然就形成了保险公司的“原保险保费收入”。</p>
<p>其中财产保险公司主要经营的就是纯保障性保险（也有少量的投资性产品），所以保监会给的财险公司的收入情况中只有原保险保费收入。</p>
<h2 id="纯投资性保险产生投资款"><a href="#纯投资性保险产生投资款" class="headerlink" title="纯投资性保险产生投资款"></a>纯投资性保险产生投资款</h2><p>纯投资性保险是指没有任何保障功能的保险，对于这类合同，保险公司将其确认为“非保险合同”，将收到的保费确认为投资款。<br>如果合同是投连险，就将其保费计入“投连险独立账户新增交费”；<br>如果是其它保险，就计入”保户投资款新增交费”。</p>
<p>这类保险规模不会太大，像之前平安保险旗下的万能险就是这样的，归类为非保险合同。</p>
<h2 id="保障储蓄性保险"><a href="#保障储蓄性保险" class="headerlink" title="保障储蓄性保险"></a>保障储蓄性保险</h2><p>1、保障储蓄性保险的特点<br>保障储蓄性保险既有保障功能，又有储蓄投资功能。期限一般在1年以上。<br>像终身寿险、长期重疾险、两全保险都属于保障储蓄性保险。</p>
<p>2、保障储蓄性保险的4种形式</p>
<ul>
<li>普通寿险<br>为客户的现金价值支付固定利率的复利利息，称为预定利率。由于利率固定，所以保单现金价值在整个保险期限内都是预先确定的。</li>
<li>分红险<br>为客户的现金价值提供保底利率，当前市场上保底利率多为2.5%左右，每年分红一次，红利主要取决于经营分红险的当年盈余</li>
<li>万能险（现已取消）<br>为客户的现金价值提供保底利率，当前市场上保底利率多为2.5%左右，每个月公布或调整一次结算利率</li>
<li>投资连结保险（跟基金公司一个模式）<br>类似于买基金，大部分资金投资于股票市场，客户承担风险，保险公司只收取资产管理费。</li>
</ul>
<p>3、保障储蓄性保险的保费收入确认<br>那保障储蓄性保险的保费收入是怎么确认的呢？<br>对于保障储蓄性保险来说，看起来保险公司既可以将其认为是保险合同，进而确认为保费收入；<br>也可以认为是非保险合同，进而产生“投资款”。<br>如果没有相应规范，保险公司往往会将其全部归为保费收入，但是显然政策是不会没有任何规范的。<br>为什么保险公司会希望将所有收入都归为保费收入呢？<br>很简单，规模收入中保费收入占比越高，越可以体现自己是一家保险公司，而且也可以符合监管机构“保险姓保”的要求</p>
<p>1) 政策规定与保险公司选择<br>2009年12月，财政部颁发了财会[2009]15号文“关于印发《保险合同相关会计处理规定》的通知”，专门明确了保障储蓄性保险的保费确认问题。</p>
<blockquote>
<p>《保险合同相关会计处理规定》相关规定（摘录）：</p>
<ul>
<li>1、保险人与投保人签订的合同，使保险人既承担保险风险又承担其他风险的，应当分别下列情况进行处理：<br>（1）保险风险部分和其他风险部分能够区分，并且能够单独计量的，应当将保险风险部分和其他风险部分进行分拆。保险风险部分，确定为保险合同；其他风险部分，不确定为保险合同。<br>（2）保险风险部分和其他风险部分不能够区分，或者虽能够区分但不能够单独计量的，如果保险风险重大，应当将整个合同确定为保险合同；如果保险风险不重大，不应当将整个合同确定为保险合同。</li>
<li>2、保险人与投保人签订的需要进行重大保险风险测试的合同，应当在合同初始确认日进行重大保险风险测试。测试结果表明，发生合同约定的保险事故可能导致保险人支付重大附加利益的，即认定该保险风险重大。附加利益，是指保险人在发生保险事故时的支付额，超过不发生保险事故时的支付额的金额。</li>
</ul>
</blockquote>
<p>什么意思呢，就是说看该保障储蓄性保险能不能将保险部分和其它（投资）部分拆分开，如果可以，就将拆分开的保险分别归入保险合同和非保险合同，这样也就自然确认了“保费收入”和“投资款”；<br>如果不好区分，那就需要看这个保险是保险风险更大还是其它风险更大了。这个就需要进行保险风险测试。</p>
<p>在上面提到的保障储蓄性保险的4种形式中，其中万能险和投连险比较容易拆分，而普通寿险和分红险需要进行风险测试。<br>2）对万能险和投连险进行拆分<br>万能险为客户设有个人帐户，投连险为客户设置投资账户。<br>客户购买万能险或者投连险之后，进入个人帐户或投资账户的钱，不计入保费收入，确认为“保户投资款新增交费”；<br>未进入的那部分保费，确认为“原保费收入”</p>
<p>3）对普通寿险和分红险进行重大保险风险测试<br>主要看是保险风险大还是其它风险大。而怎么量化这个大呢，看一下中国人寿的风险测试结果。</p>
<blockquote>
<p>中国人寿如何进行重大保险风险测试<br>（摘自中国人寿2014年年报）<br>如果原保险保单“保险风险比例”在保险期间的一个或多个时点大于等于5%，则确认为保险合同。<br>保险风险比例=(保险事故发生情境下保险人支付的金额-保险事故不发生情境下保险人支付的金额)/保险事故不发生情境下的保险人支付的金额×100%</p>
</blockquote>
<p>按中国人寿的测试来看，只要把保险产品设计成“保险金超过账户价值或现金价值5%”就可以认为整个合同是保险合同。<br>所以，这样的测试还是非常宽松的。</p>
<hr>
<p>学习资料来自微信公众号：保险神潭</p>
<p>数据来着保监会：<br><a href="http://bxjg.circ.gov.cn/web/site0/tab5202/info4103695.htm" target="_blank" rel="noopener">http://bxjg.circ.gov.cn/web/site0/tab5202/info4103695.htm</a></p>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/baoxian-1.png&quot; alt=&quot;&quot;&gt;&lt;br&gt;&lt;img src=&quot;/images/baoxian-2.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;保费收入&quot;&gt;&lt;a href=&quot;#保费收入&quot; class=&quot;headerlink&quot;
    
    </summary>
    
      <category term="保险" scheme="http://www.thinkyixia.com/categories/%E4%BF%9D%E9%99%A9/"/>
    
    
      <category term="保险" scheme="http://www.thinkyixia.com/tags/%E4%BF%9D%E9%99%A9/"/>
    
  </entry>
  
  <entry>
    <title>从0到1-读后感（一）</title>
    <link href="http://www.thinkyixia.com/2018/04/03/zero2one1/"/>
    <id>http://www.thinkyixia.com/2018/04/03/zero2one1/</id>
    <published>2018-04-02T16:00:00.000Z</published>
    <updated>2018-04-02T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>从1到n的世界里，一切市场博弈都是0和游戏，你的获得是从别人的损失中来的，在这样的游戏中，想要长久获利，只能时刻保持警惕，与一切对手做厮杀，只有打败对手，才能获取多一点点的利润。<br>从0到1的世界里，理论上讲一切市场是无限大的，以至于所有的人、企业都可以从中获利，从0到1开发的是未知的需要，市场是空白的，一旦建立护城河，可以坐着享受利润，不允许经历残酷的竞争。<br>所谓一将功成万骨枯，不过是0和博弈的结果，而从0到1的结果是所有人都找到自己的价值和长久获得价值的权利。</p>
<h1 id="进步的未来"><a href="#进步的未来" class="headerlink" title="进步的未来"></a>进步的未来</h1><p>进步分为两种：</p>
<ul>
<li>水平进步<blockquote>
<p>水平进步又称为广泛进步，意思是照搬以前的经验，从1到n的过程。</p>
</blockquote>
</li>
<li>垂直进步<blockquote>
<p>垂直进步又称深入进步，意思是探索新的道路，从0到1的过程。</p>
</blockquote>
</li>
</ul>
<p>从宏观角度看水平进步就是全球化，垂直进步就是科技进步</p>
<h2 id="水平进步（完全竞争）"><a href="#水平进步（完全竞争）" class="headerlink" title="水平进步（完全竞争）"></a>水平进步（完全竞争）</h2><p>从企业的角度来看，水平进步其实就是复制，复制现有的商业模式、现有的产品、进入现有的市场，产生完全竞争。<br>所谓的完全竞争市场在供求相当时达到平衡。<br>处于竞争市场中的每个公司之间没有差别，产品同质化严重，对产品没有定价权。当这个市场有钱可以赚的时候，就会有很多公司进入，然后供应量上升，价格回落，利润就会荡然无存。如果进入的公司太多，就会有公司亏损，甚至倒闭，然后慢慢的供求关系回到平衡状态。<br>长期来看，没有公司会获得经济利益。<br>很明显的例子，大学门口的煎饼果子，当只有一家煎饼果子摊时，供不应求，天天有人排队；<br>这时候有人看到这个生意赚钱，由于这个生意过于简单，可以很容易的复制，所以很快就在不远处再开一家煎饼果子摊，可能还会赚钱，但是肯定没有那么多了；<br>如果这时再来几个人，每个人都开一个，供给远远大于需求，这时候每天的收入可能就在成本附近了，或者根本不赚钱，一天也卖不了多少；<br>这时候肯定会有人退出，因为没有利润可以赚了，慢慢的退出几家之后，会剩下2-3家，每家的利润能勉强接受，但是肯定没有超额的利润空间了；<br>所以完全竞争会吞噬利润，完全竞争的市场也没有多大的经济利益空间。</p>
<h2 id="垂直进步（垄断）"><a href="#垂直进步（垄断）" class="headerlink" title="垂直进步（垄断）"></a>垂直进步（垄断）</h2><p>与完全竞争相反的就是垄断。垄断的公司都拥有自己的市场，拥有产品的定价权，没有竞争，可以自己决定供给量和价格，以实现利润最大化。<br>垄断企业企业可能来着与国家的特殊经营权，也可能是靠不断创新，远远甩开对手，在市场竞争中最终胜出。</p>
<blockquote>
<p>对竞争的理解<br>在整个社会中，竞争成为了一种观念。我们宣扬竞争，内化竞争的必要性；结果就是竞争越来越激烈，我们为了竞争付出了非常多的努力，但往往获得的却越来越少，我们把自己困在了竞争中。<br>学校教育也在内化竞争，用彼得蒂尔的话就是，无法安静地一直坐在书桌前学习的学生，在环境的影响下感觉自己好像低人一等；而在考试和作业上出类拔萃的孩子最终都是在这个怪异的、与现实世界没有任何交集的学术界找到个人定位。<br>优秀的学生”往高处走”，直到竞争激烈到把他们的梦想吞噬殆尽。高等教育是一场困局，在高中时对未来有宏伟规划的学生，最后却陷入了与智力程度不相上下的同学在传统职场上的竞争，如企业管理咨询和投资银行业务。<br>最后甚至为了获得把自己转变成一个墨守成规之人的特权，要支付数十万。</p>
</blockquote>
<h1 id="垄断企业的特征"><a href="#垄断企业的特征" class="headerlink" title="垄断企业的特征"></a>垄断企业的特征</h1><p>垄断的企业这么多好处，那他们的共同点是什么呢？</p>
<ol>
<li>专利技术<br>要想通过专利技术达到垄断的效果，只有优于现在的产品10倍才能拥有垄断的效果。<br>而想创造出优于现在技术十倍的产品，必然需要从0到1的创新，创造新的事物，才能是公司的价值无限增长。<br>如果你能做到10倍的优势，就可以避开竞争。</li>
<li>网络效应<br>不要一开始就进入大的市场，先寻找非常小的市场，为用户提供有价值的产品，然后逐渐扩大市场，使之产生网络效应。<br>像facebook一样，从哈佛学生开始，在到其他高校，然后到全球所有人。</li>
<li>规模经济<br>规模经济来自于好的商业模式。你的产品是不是会随着你市场占有率的增加而增需要加更多的投入。这个很重要。优秀的商业模式不会随着使用人数的增加而增加成本的投入。<br>如：在线教育，只有10个人听你讲课的时候和有10万个人听课的时候，你需要付出的精力、时间、成本几乎不需要变化。这样的模式形成的规模优势可以创造更多的利润。</li>
<li>品牌优势<br>好的品牌会占领你心里的某一个认知，一旦提起，你第一个就会想到它。深入人心的品牌形成强势的品牌垄断。<br>苹果手机、格力空调都是这样的产品。</li>
</ol>
<h1 id="如何创造垄断的企业"><a href="#如何创造垄断的企业" class="headerlink" title="如何创造垄断的企业"></a>如何创造垄断的企业</h1><p>每一个垄断的企业都来自于一个秘密（未知的需求），一个其他人都不知道，或者跟其他人看法都不一样的秘密，然后偷偷的对这个秘密进行挖掘开发，产生产品，通过这个产品建立一个垄断的企业，这是一个从0到1的创造过程。</p>
<p>总的来说，从0到1的创新可以创造出垄断的产品，而垄断的产品可以产生超额的利润。<br>从1到n的复制只会是产生同质化的产品，同质化的产品产生竞争，激烈的竞争会吞噬利润，甚至导致公司的破产。<br>个人来说也一样，如果可以找到自己的优势，避开竞争（至少不要去主动寻找竞争），找到属于自己的垄断区域，获取垄断带来的丰厚的回报。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;从1到n的世界里，一切市场博弈都是0和游戏，你的获得是从别人的损失中来的，在这样的游戏中，想要长久获利，只能时刻保持警惕，与一切对手做厮杀，只有打败对手，才能获取多一点点的利润。&lt;br&gt;从0到1的世界里，理论上讲一切市场是无限大的，以至于所有的人、企业都可以从中获利，从0到
    
    </summary>
    
      <category term="读书看报" scheme="http://www.thinkyixia.com/categories/%E8%AF%BB%E4%B9%A6%E7%9C%8B%E6%8A%A5/"/>
    
    
      <category term="从0到1" scheme="http://www.thinkyixia.com/tags/%E4%BB%8E0%E5%88%B01/"/>
    
  </entry>
  
  <entry>
    <title>互联网人常用的网站</title>
    <link href="http://www.thinkyixia.com/2018/02/10/navigation_ad/"/>
    <id>http://www.thinkyixia.com/2018/02/10/navigation_ad/</id>
    <published>2018-02-09T16:00:00.000Z</published>
    <updated>2018-02-09T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.</strong></p>
<h1 id="国内"><a href="#国内" class="headerlink" title="国内"></a>国内</h1><table>
<thead>
<tr>
<th style="text-align:left">网站名</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">adexchanger.cn (广告技术流)</td>
<td style="text-align:left"><a href="http://www.adexchanger.cn/" target="_blank" rel="noopener">http://www.adexchanger.cn/</a></td>
</tr>
<tr>
<td style="text-align:left">morketing (专注移动营销)</td>
<td style="text-align:left"><a href="http://morketing.cn/" target="_blank" rel="noopener">http://morketing.cn/</a></td>
</tr>
<tr>
<td style="text-align:left">梅花网 (营销者的信息中心)</td>
<td style="text-align:left"><a href="http://www.meihua.info/" target="_blank" rel="noopener">http://www.meihua.info/</a></td>
</tr>
<tr>
<td style="text-align:left">疯狂简报 (关注创意与生意)</td>
<td style="text-align:left"><a href="http://madbrief.com/" target="_blank" rel="noopener">http://madbrief.com/</a></td>
</tr>
<tr>
<td style="text-align:left">199it (互联网数据中心)</td>
<td style="text-align:left"><a href="http://www.199it.com/" target="_blank" rel="noopener">http://www.199it.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Topmarketing (新锐营销价值平台)</td>
<td style="text-align:left"><a href="http://itopmarketing.com/" target="_blank" rel="noopener">http://itopmarketing.com/</a></td>
</tr>
<tr>
<td style="text-align:left">RTBchina (程序化广告新闻)</td>
<td style="text-align:left"><a href="http://www.rtbchina.com/" target="_blank" rel="noopener">http://www.rtbchina.com/</a></td>
</tr>
<tr>
<td style="text-align:left">好奇心日报 (好奇驱动你的世界)</td>
<td style="text-align:left"><a href="http://www.qdaily.com/" target="_blank" rel="noopener">http://www.qdaily.com/</a></td>
</tr>
<tr>
<td style="text-align:left">虎嗅网 (独立科技媒体)</td>
<td style="text-align:left"><a href="http://www.huxiu.com/" target="_blank" rel="noopener">http://www.huxiu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">雷锋网 (读懂移动互联网)</td>
<td style="text-align:left"><a href="http://www.leiphone.com/" target="_blank" rel="noopener">http://www.leiphone.com/</a></td>
</tr>
<tr>
<td style="text-align:left">钛媒体 (网络天下创新事)</td>
<td style="text-align:left"><a href="http://www.tmtpost.com/" target="_blank" rel="noopener">http://www.tmtpost.com/</a></td>
</tr>
<tr>
<td style="text-align:left">品玩 (有品好玩的科技)</td>
<td style="text-align:left"><a href="http://www.pingwest.com/" target="_blank" rel="noopener">http://www.pingwest.com/</a></td>
</tr>
<tr>
<td style="text-align:left">36氪 (创业者平台)</td>
<td style="text-align:left"><a href="http://36kr.com/" target="_blank" rel="noopener">http://36kr.com/</a></td>
</tr>
<tr>
<td style="text-align:left">爱运营 (运营人的胜地)</td>
<td style="text-align:left"><a href="http://www.iyunying.org/" target="_blank" rel="noopener">http://www.iyunying.org/</a></td>
</tr>
<tr>
<td style="text-align:left">果壳网 (科技有意思)</td>
<td style="text-align:left"><a href="http://www.guokr.com/" target="_blank" rel="noopener">http://www.guokr.com/</a></td>
</tr>
<tr>
<td style="text-align:left">爱范儿 (连接热爱)</td>
<td style="text-align:left"><a href="http://www.ifanr.com/" target="_blank" rel="noopener">http://www.ifanr.com/</a></td>
</tr>
<tr>
<td style="text-align:left">极客公园 (发现产品的机制)</td>
<td style="text-align:left"><a href="http://www.geekpark.net/" target="_blank" rel="noopener">http://www.geekpark.net/</a></td>
</tr>
<tr>
<td style="text-align:left">亿欧网 (驱动创业创新)</td>
<td style="text-align:left"><a href="http://www.iyiou.com/" target="_blank" rel="noopener">http://www.iyiou.com/</a></td>
</tr>
<tr>
<td style="text-align:left">网站分析在中国 (从基础到前沿)</td>
<td style="text-align:left"><a href="http://www.chinawebanalytics.cn/" target="_blank" rel="noopener">http://www.chinawebanalytics.cn/</a></td>
</tr>
<tr>
<td style="text-align:left">鸟哥笔记 (移动互联网干货分享)</td>
<td style="text-align:left"><a href="http://www.niaogebiji.com/" target="_blank" rel="noopener">http://www.niaogebiji.com/</a></td>
</tr>
<tr>
<td style="text-align:left">青瓜传媒 (移动互联网营销者的信息中心)</td>
<td style="text-align:left"><a href="http://www.opp2.com/" target="_blank" rel="noopener">http://www.opp2.com/</a></td>
</tr>
<tr>
<td style="text-align:left">91运营 (运营人的训练营)</td>
<td style="text-align:left"><a href="http://www.91yunying.com/" target="_blank" rel="noopener">http://www.91yunying.com/</a></td>
</tr>
<tr>
<td style="text-align:left">人人都是产品经理 (产品人的必备利器)</td>
<td style="text-align:left"><a href="http://www.woshipm.com/" target="_blank" rel="noopener">http://www.woshipm.com/</a></td>
</tr>
<tr>
<td style="text-align:left">姑婆那些事（运营推广必看的网站）</td>
<td style="text-align:left"><a href="http://www.gupowang.com/" target="_blank" rel="noopener">http://www.gupowang.com/</a></td>
</tr>
<tr>
<td style="text-align:left">网络广告人社区（广告人不能错过的地方）</td>
<td style="text-align:left"><a href="http://iwebad.com/" target="_blank" rel="noopener">http://iwebad.com/</a></td>
</tr>
<tr>
<td style="text-align:left">砍柴网（有态度的科技媒体）</td>
<td style="text-align:left"><a href="http://www.ikanchai.com/" target="_blank" rel="noopener">http://www.ikanchai.com/</a></td>
</tr>
<tr>
<td style="text-align:left">网络人广告社区</td>
<td style="text-align:left"><a href="http://iwebad.com/" target="_blank" rel="noopener">http://iwebad.com/</a></td>
</tr>
<tr>
<td style="text-align:left">广告门</td>
<td style="text-align:left"><a href="http://www.adquan.com/" target="_blank" rel="noopener">http://www.adquan.com/</a></td>
</tr>
</tbody>
</table>
<h1 id="国外"><a href="#国外" class="headerlink" title="国外"></a>国外</h1><table>
<thead>
<tr>
<th style="text-align:left">网站名</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">adexchanger (程序化交易资讯)</td>
<td style="text-align:left"><a href="http://adexchanger.com/" target="_blank" rel="noopener">http://adexchanger.com/</a></td>
</tr>
<tr>
<td style="text-align:left">adage (营销行业新闻)</td>
<td style="text-align:left"><a href="http://adage.com/" target="_blank" rel="noopener">http://adage.com/</a></td>
</tr>
<tr>
<td style="text-align:left">businessinsider (IT 技术、产品、趋势、业内动态)</td>
<td style="text-align:left"><a href="http://www.businessinsider.com/" target="_blank" rel="noopener">http://www.businessinsider.com/</a></td>
</tr>
<tr>
<td style="text-align:left">displayadtech (美国交易广告动态图及公司大全)</td>
<td style="text-align:left"><a href="http://www.displayadtech.com/" target="_blank" rel="noopener">http://www.displayadtech.com/</a></td>
</tr>
<tr>
<td style="text-align:left">econsultancy (电商及营销分析&amp;报告)</td>
<td style="text-align:left"><a href="https://econsultancy.com/" target="_blank" rel="noopener">https://econsultancy.com/</a></td>
</tr>
<tr>
<td style="text-align:left">techmeme (科技新闻聚合，扎克伯格也爱看)</td>
<td style="text-align:left"><a href="https://econsultancy.com/" target="_blank" rel="noopener">https://econsultancy.com/</a></td>
</tr>
<tr>
<td style="text-align:left">TechCrunch (最新科技新闻)</td>
<td style="text-align:left"><a href="http://techcrunch.com/" target="_blank" rel="noopener">http://techcrunch.com/</a></td>
</tr>
<tr>
<td style="text-align:left">emarketer (数字广告报告及洞察)</td>
<td style="text-align:left"><a href="http://www.emarketer.com/" target="_blank" rel="noopener">http://www.emarketer.com/</a></td>
</tr>
<tr>
<td style="text-align:left">L2 (商业情报)</td>
<td style="text-align:left"><a href="http://l2inc.com/" target="_blank" rel="noopener">http://l2inc.com/</a></td>
</tr>
<tr>
<td style="text-align:left">digitalmarketingmagazine (数字营销杂志)</td>
<td style="text-align:left"><a href="http://digitalmarketingmagazine.co.uk/" target="_blank" rel="noopener">http://digitalmarketingmagazine.co.uk/</a></td>
</tr>
<tr>
<td style="text-align:left">marketingland (数字营销趋势)</td>
<td style="text-align:left"><a href="http://marketingland.com/" target="_blank" rel="noopener">http://marketingland.com/</a></td>
</tr>
<tr>
<td style="text-align:left">mobiforge (移动网页设计及开发)</td>
<td style="text-align:left"><a href="http://mobiforge.com/" target="_blank" rel="noopener">http://mobiforge.com/</a></td>
</tr>
</tbody>
</table>
<h1 id="常用工具"><a href="#常用工具" class="headerlink" title="常用工具"></a>常用工具</h1><table>
<thead>
<tr>
<th style="text-align:left">网站名</th>
<th style="text-align:left">网址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">百度指数 (搜索指数热度)</td>
<td style="text-align:left"><a href="http://index.baidu.com/" target="_blank" rel="noopener">http://index.baidu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">adbug (针对广告的爬虫及搜索)</td>
<td style="text-align:left"><a href="http://www.adbug.cn/" target="_blank" rel="noopener">http://www.adbug.cn/</a></td>
</tr>
<tr>
<td style="text-align:left">爱站网 (站长工具，网站 seo 分析)</td>
<td style="text-align:left"><a href="http://www.aizhan.com/" target="_blank" rel="noopener">http://www.aizhan.com/</a></td>
</tr>
<tr>
<td style="text-align:left">google 趋势 (google 搜索指数)</td>
<td style="text-align:left"><a href="http://www.google.com/trends" target="_blank" rel="noopener">http://www.google.com/trends</a></td>
</tr>
<tr>
<td style="text-align:left">微博指数 (微博话题关注度)</td>
<td style="text-align:left"><a href="http://data.weibo.com/" target="_blank" rel="noopener">http://data.weibo.com/</a></td>
</tr>
<tr>
<td style="text-align:left">淘宝指数 (热卖商品)</td>
<td style="text-align:left"><a href="http://shu.taobao.com/" target="_blank" rel="noopener">http://shu.taobao.com/</a></td>
</tr>
<tr>
<td style="text-align:left">阿里指数 (采购趋势分析)</td>
<td style="text-align:left"><a href="http://index.1688.com/" target="_blank" rel="noopener">http://index.1688.com/</a></td>
</tr>
<tr>
<td style="text-align:left">移动 app 趋势 (跟踪百万应用)</td>
<td style="text-align:left"><a href="http://www.asou.com/" target="_blank" rel="noopener">http://www.asou.com/</a></td>
</tr>
<tr>
<td style="text-align:left">电视收视率</td>
<td style="text-align:left"><a href="http://eye.kuyun.com/web/" target="_blank" rel="noopener">http://eye.kuyun.com/web/</a></td>
</tr>
<tr>
<td style="text-align:left">旅游预测</td>
<td style="text-align:left"><a href="http://trends.baidu.com/tour/" target="_blank" rel="noopener">http://trends.baidu.com/tour/</a></td>
</tr>
<tr>
<td style="text-align:left">it 桔子 (国内互联网公司大事记)</td>
<td style="text-align:left"><a href="https://www.itjuzi.com/" target="_blank" rel="noopener">https://www.itjuzi.com/</a></td>
</tr>
<tr>
<td style="text-align:left">Crunchbase (国外公司大事记)</td>
<td style="text-align:left"><a href="https://www.crunchbase.com/" target="_blank" rel="noopener">https://www.crunchbase.com/</a></td>
</tr>
<tr>
<td style="text-align:left">deeplink (deeplink 试用)</td>
<td style="text-align:left"><a href="http://deeplink.me/" target="_blank" rel="noopener">http://deeplink.me/</a></td>
</tr>
<tr>
<td style="text-align:left">Ghostery (广告跟踪及监测)</td>
<td style="text-align:left"><a href="http://ghostery.com/" target="_blank" rel="noopener">http://ghostery.com/</a> (有各版本浏览器插件)</td>
</tr>
<tr>
<td style="text-align:left">百度 echarts (国内最好的数据可视化工具)</td>
<td style="text-align:left"><a href="http://echarts.baidu.com/" target="_blank" rel="noopener">http://echarts.baidu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">百度 API 服务 (最近开放了用户标签 API)</td>
<td style="text-align:left"><a href="http://apistore.baidu.com/" target="_blank" rel="noopener">http://apistore.baidu.com/</a></td>
</tr>
<tr>
<td style="text-align:left">网页 abtest  (可视化网站优化)</td>
<td style="text-align:left"><a href="http://www.abtester.cn/" target="_blank" rel="noopener">http://www.abtester.cn/</a></td>
</tr>
<tr>
<td style="text-align:left">Piwik (开源统计分析工具)</td>
<td style="text-align:left"><a href="http://piwik.org/" target="_blank" rel="noopener">http://piwik.org/</a></td>
</tr>
<tr>
<td style="text-align:left">affpaying  (国外联盟排行及 offer 查询)</td>
<td style="text-align:left"><a href="http://www.affpaying.com/" target="_blank" rel="noopener">http://www.affpaying.com/</a></td>
</tr>
<tr>
<td style="text-align:left"><font color="#FF0000"> 大数据导航网站（非常全面的导航网站）</font></td>
<td style="text-align:left"><a href="http://hao.199it.com/" target="_blank" rel="noopener">http://hao.199it.com/</a></td>
</tr>
</tbody>
</table>
<p>持续更新……</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;免责声明: 以下网站皆收集于互联网,若无意触犯相关法律,告知立即删除.&lt;/strong&gt;&lt;/p&gt;
&lt;h1 id=&quot;国内&quot;&gt;&lt;a href=&quot;#国内&quot; class=&quot;headerlink&quot; title=&quot;国内&quot;&gt;&lt;/a&gt;国内&lt;/h1&gt;&lt;table&gt;
&lt;thea
    
    </summary>
    
      <category term="工具" scheme="http://www.thinkyixia.com/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="广告" scheme="http://www.thinkyixia.com/tags/%E5%B9%BF%E5%91%8A/"/>
    
      <category term="资源" scheme="http://www.thinkyixia.com/tags/%E8%B5%84%E6%BA%90/"/>
    
  </entry>
  
  <entry>
    <title>java io读取超大文件</title>
    <link href="http://www.thinkyixia.com/2018/01/30/java-io-1/"/>
    <id>http://www.thinkyixia.com/2018/01/30/java-io-1/</id>
    <published>2018-01-29T16:00:00.000Z</published>
    <updated>2018-01-29T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>日常工作过程中经常使用IO读写文件，但是有时候由于文件过大，导致IO读取时出现内存溢出。<br>这种情况下，我们就可以使用内存映射文件来解决。</p>
<h1 id="什么是内存映射文件呢？"><a href="#什么是内存映射文件呢？" class="headerlink" title="什么是内存映射文件呢？"></a>什么是内存映射文件呢？</h1><p>内存映射文件，可以理解为将一个文件映射到内存地址，然后可以通过操作内存来访问文件数据。这样既不用担心内存溢出，而且还能获得更高的性能。</p>
<h1 id="那如何创建和使用内存映射文件呢？"><a href="#那如何创建和使用内存映射文件呢？" class="headerlink" title="那如何创建和使用内存映射文件呢？"></a>那如何创建和使用内存映射文件呢？</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">package com.tzq.utils;</span><br><span class="line"></span><br><span class="line">import java.io.FileInputStream;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.nio.MappedByteBuffer;</span><br><span class="line">import java.nio.channels.FileChannel;</span><br><span class="line">import com.alibaba.fastjson.JSON;</span><br><span class="line">import com.alibaba.fastjson.JSONObject;</span><br><span class="line">/**</span><br><span class="line"> * @author tzq</span><br><span class="line"> */</span><br><span class="line">public class IOUtil &#123;</span><br><span class="line">    private MappedByteBuffer[] mappedBufArray;</span><br><span class="line">    private int count = 0;</span><br><span class="line">    private int number;</span><br><span class="line">    private FileInputStream fileIn;</span><br><span class="line">    private long fileLength;</span><br><span class="line">    private int arraySize;</span><br><span class="line">    private byte[] array;</span><br><span class="line"></span><br><span class="line">    public IOUtil(String fileName, int arraySize) throws IOException &#123;</span><br><span class="line">        this.fileIn = new FileInputStream(fileName);</span><br><span class="line">        FileChannel fileChannel = fileIn.getChannel();</span><br><span class="line">        this.fileLength = fileChannel.size();</span><br><span class="line">        this.number = (int) Math.ceil((double) fileLength / (double) Integer.MAX_VALUE);</span><br><span class="line">        this.mappedBufArray = new MappedByteBuffer[number];// 内存文件映射数组</span><br><span class="line">        long preLength = 0;</span><br><span class="line">        long regionSize = (long) Integer.MAX_VALUE;// 映射区域的大小</span><br><span class="line">        for (int i = 0; i &lt; number; i++) &#123;// 将文件的连续区域映射到内存文件映射数组中</span><br><span class="line">            if (fileLength - preLength &lt; (long) Integer.MAX_VALUE) &#123;</span><br><span class="line">                regionSize = fileLength - preLength;// 最后一片区域的大小</span><br><span class="line">            &#125;</span><br><span class="line">            mappedBufArray[i] = fileChannel.map(FileChannel.MapMode.READ_ONLY, preLength, regionSize);</span><br><span class="line">            preLength += regionSize;// 下一片区域的开始</span><br><span class="line">        &#125;</span><br><span class="line">        this.arraySize = arraySize;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int read() throws IOException &#123;</span><br><span class="line">        if (count &gt;= number) &#123;</span><br><span class="line">            return -1;</span><br><span class="line">        &#125;</span><br><span class="line">        int limit = mappedBufArray[count].limit();</span><br><span class="line">        int position = mappedBufArray[count].position();</span><br><span class="line">        if (limit - position &gt; arraySize) &#123;</span><br><span class="line">            array = new byte[arraySize];</span><br><span class="line">            System.out.println(array);</span><br><span class="line">            mappedBufArray[count].get(array);</span><br><span class="line">            return arraySize;</span><br><span class="line">        &#125; else &#123;// 本内存文件映射最后一次读取数据</span><br><span class="line">            array = new byte[limit - position];</span><br><span class="line">            mappedBufArray[count].get(array);</span><br><span class="line">            if (count &lt; number) &#123;</span><br><span class="line">                count++;// 转换到下一个内存文件映射</span><br><span class="line">            &#125;</span><br><span class="line">            return limit - position;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    public void close() throws IOException &#123;</span><br><span class="line">        fileIn.close();</span><br><span class="line">        array = null;</span><br><span class="line">    &#125;</span><br><span class="line">    public byte[] getArray() &#123;</span><br><span class="line">        return array;</span><br><span class="line">    &#125;</span><br><span class="line">    public long getFileLength() &#123;</span><br><span class="line">        return fileLength;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void main(String[] args) throws IOException &#123;</span><br><span class="line">    	IOUtil reader = new IOUtil(&quot;/Users/tzq/Downloads/data.log&quot;, 65536);</span><br><span class="line">        long start = System.nanoTime();</span><br><span class="line">        int i = 0 ;</span><br><span class="line">        while (reader.read() != -1)&#123;</span><br><span class="line">        	i = i +1;</span><br><span class="line">        	String str = new String(reader.getArray());</span><br><span class="line">        	String[] lines = str.split(&quot;\r&quot;);</span><br><span class="line">        	for(String line : lines)&#123;</span><br><span class="line">        		System.out.println(line);</span><br><span class="line">        	&#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        reader.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;日常工作过程中经常使用IO读写文件，但是有时候由于文件过大，导致IO读取时出现内存溢出。&lt;br&gt;这种情况下，我们就可以使用内存映射文件来解决。&lt;/p&gt;
&lt;h1 id=&quot;什么是内存映射文件呢？&quot;&gt;&lt;a href=&quot;#什么是内存映射文件呢？&quot; class=&quot;headerlink
    
    </summary>
    
      <category term="技术" scheme="http://www.thinkyixia.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="java" scheme="http://www.thinkyixia.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Spark使用多文件输出</title>
    <link href="http://www.thinkyixia.com/2017/12/04/spark-3/"/>
    <id>http://www.thinkyixia.com/2017/12/04/spark-3/</id>
    <published>2017-12-03T16:00:00.000Z</published>
    <updated>2017-12-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="需求描述"><a href="#需求描述" class="headerlink" title="需求描述"></a>需求描述</h1><p>最近遇到了这样一个场景，用spark去处理多个数据源的数据，但是这些数据都掺杂在一起，需要根据不同数据源将数据存储在不同的目录中。</p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>我们spark处理晚的数据，在存储的时候可以使用saveAsHadoopFile去自定义存储路径和格式。</p>
<p>具体实例如下：<br>1、首先需要创建一个类，去继承MultipleTextOutputFormat类，并重写它的generateFileNameForKeyValue方法。</p>
<p>而MultipleTextOutputFormat是何方神圣呢？<br>其实MultipleTextOutputFormat是hadoop的多文件输出类。在写每条记录之前，MultipleOutputFormat将调用generateFileNameForKeyValue方法来确定需要写入的文件名。<br>其中generateFileNameForKeyValue方法的默认实现如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">protected String generateFileNameForKeyValue(K key, V value, String name) &#123;</span><br><span class="line">    return name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们可以重写generateFileNameForKeyValue方法，改成根据key存储，或者解析value，根据value中的某一字段进行分目录存储都可以。下例是根据key分目录存储。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 设置根据spark的key进行存储</span><br><span class="line"> */</span><br><span class="line">class RDDMultipleTextOutputFormat[K, V]() extends MultipleTextOutputFormat[K, V]() &#123;</span><br><span class="line">    override def generateFileNameForKeyValue(key: K, value: V, name: String) : String = &#123;</span><br><span class="line">        (key + &quot;/&quot; + name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>2、然后存储的时候可以使用saveAsHadoopFile存储，并指定存储方式。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">... //处理完的rdd调用saveAsHadoopFile，使用自己定义的存储方式存储</span><br><span class="line">resultRdd.saveAsHadoopFile(</span><br><span class="line">        outputDataPath,</span><br><span class="line">        classOf[String],</span><br><span class="line">        classOf[String],</span><br><span class="line">        classOf[RDDMultipleTextOutputFormat[_,_]])</span><br></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;需求描述&quot;&gt;&lt;a href=&quot;#需求描述&quot; class=&quot;headerlink&quot; title=&quot;需求描述&quot;&gt;&lt;/a&gt;需求描述&lt;/h1&gt;&lt;p&gt;最近遇到了这样一个场景，用spark去处理多个数据源的数据，但是这些数据都掺杂在一起，需要根据不同数据源将数据存储在不同的目
    
    </summary>
    
      <category term="技术" scheme="http://www.thinkyixia.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="spark" scheme="http://www.thinkyixia.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Spark 任务提交过程</title>
    <link href="http://www.thinkyixia.com/2017/11/29/spark-2/"/>
    <id>http://www.thinkyixia.com/2017/11/29/spark-2/</id>
    <published>2017-11-28T16:00:00.000Z</published>
    <updated>2017-11-28T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Spark任务提交的过程"><a href="#Spark任务提交的过程" class="headerlink" title="Spark任务提交的过程"></a>Spark任务提交的过程</h1><p>试着画图描述一个spark任务提交的完整过程……</p>
<p>Spark任务提交流程如下图：<br><img src="/images/spark任务提交过程.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Spark任务提交的过程&quot;&gt;&lt;a href=&quot;#Spark任务提交的过程&quot; class=&quot;headerlink&quot; title=&quot;Spark任务提交的过程&quot;&gt;&lt;/a&gt;Spark任务提交的过程&lt;/h1&gt;&lt;p&gt;试着画图描述一个spark任务提交的完整过程……&lt;/p&gt;
&lt;
    
    </summary>
    
      <category term="技术" scheme="http://www.thinkyixia.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="spark" scheme="http://www.thinkyixia.com/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>JVM</title>
    <link href="http://www.thinkyixia.com/2017/11/21/jvm-1/"/>
    <id>http://www.thinkyixia.com/2017/11/21/jvm-1/</id>
    <published>2017-11-20T16:00:00.000Z</published>
    <updated>2017-11-20T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="jvm内存区域"><a href="#jvm内存区域" class="headerlink" title="jvm内存区域"></a>jvm内存区域</h1><ol>
<li><p>线程隔离的数据区</p>
<ul>
<li>程序计数器<br>程序计数器（Program Counter Register）是当前线程所执行的字节码的行号指示器，字节码解释器工作时就是通过改变这个计数器的值来选取下一条需要执行的字节码指令。分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖这个计数器来完成。<br>为了线程切换后能恢复到正确的执行位置，每条线程都需要有一个独立的程序计数器，各条线程之间计数器互不影响，独立存储，所以程序计数器这类内存区域为“线程私有”的内存<br>如果线程正在执行的是Native方法，这个计数器值则为空（Undefined）。<br>native是与C++联合开发的时候用的！使用native关键字说明这个方法是原生函数，也就是这个方法是用C/C++语言实现的，并且被编译成了DLL，由java去调用</li>
<li>java虚拟机栈</li>
<li>本地方法栈<br>他们作用相似，区别只是：虚拟机栈为虚拟机执行Java方法（也就是字节码）服务，而本地方法栈则为虚拟机使用到的Native方法服务。<br>每个方法在执行的同时都会创建一个栈帧（Stack Frame）用于存储局部变量表、操作数栈、动态链接、方法出口等信息。每一个方法从调用直至执行完成的过程，就对应着一个栈帧在虚拟机栈中入栈到出栈的过程。<br>程序员人为的分为“堆栈”中的“栈”。</li>
</ul>
<p>栈的存储：<br>栈里存放了编译期可知的各种基本数据类型（boolean、byte、char、short、int、float、long、double）、对象引用和指向了一条字节码指令的地址。<br>局部变量表所需的内存空间在编译期间完成分配，其中64位的long和double类型的数据会占2个局部变量空间，其余的数据类型只占用1个。当进入一个方法时，这个方法需要在帧中分配多大的局部变量空间是完全确定的，在方法运行期间不会改变局部变量表的大小。</p>
</li>
<li>所有线程共享的数据区<br>java队、方法区<br><img src="/images/jvm-1.png" alt=""></li>
</ol>
<h1 id="对象的引用"><a href="#对象的引用" class="headerlink" title="对象的引用"></a>对象的引用</h1><p>java中引用分为：强引用、软引用、弱引用、虚引用（幽灵引用或幻影引用），这4种引用强度逐渐减弱。</p>
<ul>
<li>强引用<br>在程序代码中正常的类似于 “Person p = new Person()“这类的引用；垃圾回收器不会回收掉被强引用的对象</li>
<li>软引用<br>有用但非必须的对象，jdk中提供了SoftReference类来实现软引用<br>系统在发生内存溢出异常时，会把软引用对象进行回收</li>
<li>弱引用<br>非必须的对象，jdk中提供了WeakReference类来实现弱引用，比软引用弱一些，垃圾回收不论内存是否不足都会回收只被弱引用关联的对象</li>
<li>虚引用<br>对被引用对象的生存时间不影响；<br>无法通过虚引用来取得一个对象实例；<br>为一个对象设置虚引用关联的唯一目的就是能在这个对象被收集器回收时收到一个系统通知；<br>jdk提供PhantomReference类来实现虚引用</li>
</ul>
<h1 id="GC算法"><a href="#GC算法" class="headerlink" title="GC算法"></a>GC算法</h1><h2 id="标记-清除算法（Mark-Sweep）"><a href="#标记-清除算法（Mark-Sweep）" class="headerlink" title="标记-清除算法（Mark-Sweep）"></a>标记-清除算法（Mark-Sweep）</h2><ol>
<li>标记出所有需要回收的对象，在标记完成后统一回收所有被标记的对象<br>该算法的缺点：</li>
</ol>
<ul>
<li>效率问题<br>标记和清除两个过程的效率都不高</li>
<li>空间问题<br>标记清除后会产生大量不连续的内存碎片，空间碎片太多可能会导致以后在程序运行过程中需要分配较大对象时，无法找到足够的连续内存而不得不提前触发另一次垃圾回收动作</li>
</ul>
<h2 id="复制算法（Copying）"><a href="#复制算法（Copying）" class="headerlink" title="复制算法（Copying）"></a>复制算法（Copying）</h2><ol>
<li>将可用内存按容量划分为大小相等的两块，每次只是用其中之一</li>
<li>当这一块的内存用完了，就将还存活的对象复制到另外一块上面，然后再把已使用过的内存空间一次清理掉<br>该算法的优缺点：</li>
</ol>
<ul>
<li>优点：<br>这样使得每次都是对整个半区进行内存回收，内存分配时也就不用考虑内存碎片等复杂情况，只要移动堆顶指针，按顺序分配内存即可，实现简单，运行高效</li>
<li>缺点：</li>
</ul>
<ol>
<li>实际可用内存只有原来的一半</li>
<li>复制算法在对象存活率比较高的情况下需要对较多的对象进行复制操作，效率会变低</li>
</ol>
<p>现在的商业虚拟机都使用这种算法来回收新生代。<br>将内存分为一块较大的Eden空间和两块较小的Survivor空间，每次使用Eden和其中的一块Survivor空间，当回收时，将Eden和Survivor中还存活着的对象一次性复制到另外一块Survivor空间上，最后清理掉Eden和刚刚使用过的Survivor空间。<br>HotSpot虚拟机默认Eden和Survivor的大小比例是8:1，浪费10%</p>
<p>当Survivor空间不够用的时候，需要依赖其他的内存（这里指老年代）进行分配担保</p>
<h2 id="标记整理算法（Mark-Compact）"><a href="#标记整理算法（Mark-Compact）" class="headerlink" title="标记整理算法（Mark-Compact）"></a>标记整理算法（Mark-Compact）</h2><ol>
<li>标记出需要清除的对象</li>
<li>让所有存活的对象都向一端移动，然后直接清理掉端边界以外的内存</li>
</ol>
<h2 id="分代收集算法（Generational-Collection）"><a href="#分代收集算法（Generational-Collection）" class="headerlink" title="分代收集算法（Generational Collection）"></a>分代收集算法（Generational Collection）</h2><ol>
<li>根据对象存活周期将内存划分为几块</li>
<li>一般是把java堆分为新生代和老年代，这样就可用根据各个年代的特点采用最恰当的收集算法</li>
<li>在新生代中，每次垃圾回收时都会发现有大量的对象死去，只有少量存活，所以适合复制算法，只需要付出少量存活对象的复制成本就可用完成收集</li>
<li>老年代中因为对象存活率高、没有额外空间对它进行分配担保，就必须使用“标记-清理”或者“标记-整理”算法来进行回收</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;jvm内存区域&quot;&gt;&lt;a href=&quot;#jvm内存区域&quot; class=&quot;headerlink&quot; title=&quot;jvm内存区域&quot;&gt;&lt;/a&gt;jvm内存区域&lt;/h1&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;线程隔离的数据区&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;程序计数器&lt;br&gt;程序计数器（Prog
    
    </summary>
    
      <category term="技术" scheme="http://www.thinkyixia.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="java" scheme="http://www.thinkyixia.com/tags/java/"/>
    
      <category term="jvm" scheme="http://www.thinkyixia.com/tags/jvm/"/>
    
  </entry>
  
  <entry>
    <title>“在别处”症候群</title>
    <link href="http://www.thinkyixia.com/2017/11/18/zashuo-1/"/>
    <id>http://www.thinkyixia.com/2017/11/18/zashuo-1/</id>
    <published>2017-11-17T16:00:00.000Z</published>
    <updated>2017-11-17T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>文章转自：<a href="http://www.xinli001.com/info/100008789" target="_blank" rel="noopener">http://www.xinli001.com/info/100008789</a></p>
<p>心理导读：生活不一定在别处，当我们将全部希望和幻想寄托在一个虚无的新环境时，可能我们早已忘却“生活在这里”的能力。—— www.xinli001.com<br><img src="/images/zashuo-1.png" alt=""><br>我有一位朋友，年纪长我几岁，工作能力很强，在我所处行业内算是小有名气。</p>
<p>半年前他辞了职，再之后都在家中赋闲，每天喝茶写字，摆弄各种爱好，至少从社交软件上看，日子过得很充实。我有次跟他聊天，问他有没有工作的计划。他没有直接回答我，而是绕开我的问题说着行业的问题所在，最后他说，没准换个城市心境会改变很多。</p>
<p>我被绕了进去，追着问，即使换了环境，这些问题不是依然还存在吗？</p>
<p>他答道，可是如果你的心态变了，看问题的方式也许就会有大不同。</p>
<p>我说，心态的改变与环境有必要联系吗？</p>
<p>他盯着我，直到看得我发毛才一脸肯定地说，那是当然的了。</p>
<p>原本这只是一次闲聊，巧的是，跟他告别两周后，相同的对白又一次发生。我公司里有位实习生试用期结束，对我说想要换一间公司。我第一反应是留住他，因为他在几位同期的实习生当中，能力算是不错的。</p>
<p>我问他是因为薪水的问题，还是在这里工作得不顺心？</p>
<p>他坦白说都不是，只是觉得自己每天做最基础的工作，一成不变的日程令他觉得浪费时间。他说，没准换间公司会见识到更多的东西。</p>
<p>我说，即使换一间公司，以你初入职场的能力，也一样是做同样的事情啊，何必操之过急呢。</p>
<p>他摇摇头说，正是因为我刚刚毕业，所以才急需多经历新鲜的环境，这样才能看到不同角度的世界，才称得上完整的人生。</p>
<p>听到这里，我哑口无言，只好在他的辞职函上签字。</p>
<p>如果说我那位朋友还没有将话点透，实习生的道理则让我切切实实无从反驳。换作我是他的年龄，大概想破头也讲不出这样角度刁钻的观点。我不禁沉思，在大部分人眼中，视界狭窄就代表着见识浅、能力低，沦为弱势群体的想法根深蒂固，而经历不同环境所带来的阅历上的“充电”是正常，且理所应当的。然而，在这个逻辑关系里，人们似乎都刻意在着重“经历”的获取，而忽略了阅历并非只要经历过就会拥有这件事。</p>
<p>前不久我收到一位朋友从台北寄来明信片，正面是雄伟的一零一大厦，背面却只潦草写着，不多说了，在赶飞机。回来的时候我去机场接她，问到台北的感受如何，她带着一脸倦容说，人太多，行程又紧张，很多景点都只是走马观花，照片都没拍几张。实在难以描述在她语气中的失落，有不甘，有无奈，更多的是累。</p>
<p>你看，明明是去度假，却让自己累成了一匹马。在此之前，她何尝不是抱着摆脱都市生活躲到远方旅行，换个角度看世界的想法，然而这种急匆匆的经历，除了满心的疲累，我实在想不出可以有什么收获。</p>
<p>事实上，我认识的许多人都是这样，在城市里一天天觉得毫无乐趣枯燥乏味犹如困兽，却以为去遥远的地方旅行时就会神采焕发活灵活现；相同的工作做上一年半载就开始怀疑是在蹉跎人生，却以为换间公司换个环境就可以寻找到青春的激情、丰富的见闻和源源不断的新鲜感；在感情上，这种毫无逻辑的心理表现得更加淋漓尽致，遇见心仪的对象，睡前辗转反侧脑补无数种同她在一起的甜蜜场景，自以为天造地设，然而真正走到一起却发现她矫情做作，爱慕虚荣，睡觉打呼醒来还有口气，方才如大梦初醒，悔之晚矣。</p>
<p>“生活在别处”，诗人兰波的这句话自从被米兰·昆德拉弄得世人皆知，就变成了困顿都市人们心中的精神鸦片。在一成不变的生活夹缝中求生存，难免会幻想“在别处”的美好，那儿有清新空气恬静生活，有高薪待遇闲暇时光，更有簇新的梦想，志同道合的人群和无数喜闻乐见的送炮女青年。</p>
<p>记得念书的时候，我们的天敌是父母口中别人家的孩子，不久你谈恋爱了，天敌变成了恋人言语中别人家的男朋友，没想到不知不觉中，我们自己已经为自己设好了来自同一星球的天敌，别处的生活。看完无数版本的砺志电影和书籍传记，我们自以为掌握改变命运的咒语，学会不停地规劝自己和别人，换个工作，换个女友，换个城市，换种人生，用改变带来的可能性来告解心中的压抑，却从未想过，此刻压抑着你的未必是当下的生活。</p>
<p>我另一位朋友大学的专业是西班牙语，毕业后去厄瓜多尔援建铁路，在那儿工作了两年决定回国，我问他原因，他说那里的环境过于艰苦，经常睡到一半，发现被窝里有一只巴掌大的毛茸茸蜘蛛，出门走一圈，两米长的鳄鱼满街跑，有时候吃人，有时候被当地人捉走吃，不仅如此，他还遭遇过不下两次持枪入室抢劫。终于有一天他忍无可忍，觉得再待下去可能总有一天会被鳄鱼吃掉或者被无辜枪杀，于是毅然决定回国。</p>
<p>回来后，他找了一份翻译的工作，薪水在国内也还算不错，但他始终无法适应。在厄瓜多尔的时候，他的工作比较自由，一到假期就买张机票满世界跑，可现在就连附近的旅游城市他也只能望洋兴叹，实在忍不住的时候他就在广州租一辆自行车，漫无目的地满城跑。这种不适应感遍布他生活的方方面面，在国外每天幻想八大菜系梦里都是活色生香，但来到广州，依然每天只在一家茶餐厅用餐，不是他吃不起，而是完全没有了想要吃的欲望。</p>
<p>就这样，他在国内工作不到三个月，就决定重新去国外工作。比起空虚，他宁愿选择艰苦。</p>
<p>他的这种情况被我笑称为“在别处症候群”，在同一个环境待的越久，越会产生抵触的情绪和对别处生活的向往。但这种向往，只是你对现实的失望和逃避，即使去到别处，也未必能获得理想中的生活，你只是像个赌徒般沉溺在那无数种可能性之中而已。</p>
<p>我们习惯了时刻绷紧弦待命，哪怕是周末也像是在与时间赛跑，两点约了朋友喝茶所以一点就要出发，因为怕堵，五点必须吃完晚饭否则就赶不上六点半的电影开场。我们也厌倦这种枯燥的三点一线，以为在别处就可以摆脱所有的烦恼。但别忘了，在同样的城市里，有人下班路上观察蚂蚁搬家都要半小时，也有人甭管在纽约巴黎东京还是公司大厦都一样，拼命赶时间，仿佛浪费一丁点儿就是罪过。</p>
<p>生活不一定在别处，当我们将全部希望和幻想寄托在一个虚无的新环境时，可能我们早已忘却“生活在这里”的能力。其实，不被生活改变，亦不放过丝毫享受生活的机会，也许这才是生活真正的模样。微博上有人讲现代人个个都选择困难症，在上海向往北京的烤鸭，在北京惦记广州的早茶，在广州垂涎重庆的火锅，在重庆梦到西安的肉夹馍，然而我们在一次次向往和踟蹰中，浪费掉的绝不止是光阴。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;文章转自：&lt;a href=&quot;http://www.xinli001.com/info/100008789&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://www.xinli001.com/info/100008789&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;心理
    
    </summary>
    
      <category term="杂说" scheme="http://www.thinkyixia.com/categories/%E6%9D%82%E8%AF%B4/"/>
    
    
      <category term="杂说" scheme="http://www.thinkyixia.com/tags/%E6%9D%82%E8%AF%B4/"/>
    
  </entry>
  
  <entry>
    <title>Zookeeper的选举四：Leader选举总结</title>
    <link href="http://www.thinkyixia.com/2017/11/04/zookeeper-6/"/>
    <id>http://www.thinkyixia.com/2017/11/04/zookeeper-6/</id>
    <published>2017-11-03T16:00:00.000Z</published>
    <updated>2017-11-03T16:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>zookeeper在启动时候会进行选主；<br>下面对zookeeper的选主过程做一些总结。</p>
<h1 id="Zookeeper选主流程"><a href="#Zookeeper选主流程" class="headerlink" title="Zookeeper选主流程"></a>Zookeeper选主流程</h1><p>本文主要描述zookeeper启动时的选主过程，当leader挂掉，重新进行选举的过程与此过程大同小异，这里就不过多赘述。</p>
<p>zookeeper选主流程如下图：<br><img src="/images/zookeeper选主过程-1.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;zookeeper在启动时候会进行选主；&lt;br&gt;下面对zookeeper的选主过程做一些总结。&lt;/p&gt;
&lt;h1 id=&quot;Zookeeper选主流程&quot;&gt;&lt;a href=&quot;#Zookeeper选主流程&quot; class=&quot;headerlink&quot; title=&quot;Zookeeper选主
    
    </summary>
    
      <category term="技术" scheme="http://www.thinkyixia.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="zookeeper" scheme="http://www.thinkyixia.com/tags/zookeeper/"/>
    
  </entry>
  
</feed>
